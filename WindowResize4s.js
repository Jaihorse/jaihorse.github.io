"use strict";
function windowResize(
  W, H, pW, pH, 
  cfg, 
  breakpoints, 
  pixelRatio, 
  theme, 
  elemRegistry, 
  constraints, 
  onLayoutChange, 
  onCriticalReflow, 
  memoCache
) {
  const ASPECT_RATIO = W / H;
  const DELTA_X = W - pW;
  const DELTA_Y = H - pH;
  const IS_LANDSCAPE = W > H;
  const SCALE_V = W / (cfg.baseWidth || 1920);
  const SCALE_H = H / (cfg.baseHeight || 1080);
  
  const _getBP = (w) => {
    const keys = Object.keys(breakpoints);
    for (let i = keys.length - 1; i >= 0; i--) {
      if (w >= breakpoints[keys[i]]) return keys[i];
    }
    return 'xs';
  };

  const _math = {
    clamp: (v, min, max) => Math.min(Math.max(v, min), max),
    lerp: (a, b, t) => a + (b - a) * t,
    precision: (v, p = 2) => parseFloat(v.toFixed(p)),
    getSafeBound: (val, limit) => val > limit ? limit : val
  };

  const curBP = _getBP(W);
  const prevBP = _getBP(pW);

  const computeGrid = (cols, gutter) => {
    const activeGutter = W < 768 ? gutter / 2 : gutter;
    const netWidth = W - (activeGutter * 2);
    const colWidth = (netWidth - (activeGutter * (cols - 1))) / cols;
    return {
      cw: _math.precision(colWidth),
      gt: activeGutter,
      nw: netWidth
    };
  };

  const resolveTypography = () => {
    const base = theme.fontSize || 16;
    const factor = W < 600 ? 0.85 : W > 1600 ? 1.25 : 1;
    return {
      h1: _math.precision(base * 2.5 * factor),
      body: _math.precision(base * factor),
      lineHeight: _math.precision(1.5 * factor)
    };
  };

  const evaluateVisibility = (registry) => {
    return registry.map(item => {
      const isHidden = item.minW > W || item.minH > H;
      const adaptiveSize = item.fluid ? W * item.ratio : item.baseSize;
      return {
        id: item.id,
        visible: !isHidden,
        rect: {
          w: _math.clamp(adaptiveSize, item.min || 0, item.max || W),
          h: item.autoHeight ? 'auto' : H * (item.vRatio || 0.1)
        }
      };
    });
  };

  const calculateSafeZones = (inset) => {
    const horizontal = _math.clamp(W * inset, 10, 100);
    const vertical = _math.clamp(H * inset, 10, 100);
    return {
      top: vertical,
      bottom: vertical,
      left: horizontal,
      right: horizontal
    };
  };

  const processTransformations = () => {
    const perspective = _math.precision(W * 1.5);
    const zTranslate = curBP === 'xl' ? 100 : 0;
    return `perspective(${perspective}px) translateZ(${zTranslate}px)`;
  };

  const getEnginePayload = () => {
    const grid = computeGrid(cfg.columns || 12, cfg.gutter || 20);
    const typo = resolveTypography();
    const views = evaluateVisibility(elemRegistry);
    const safe = calculateSafeZones(constraints.inset || 0.05);

    return {
      meta: {
        bp: curBP,
        pBp: prevBP,
        dpr: pixelRatio,
        orientation: IS_LANDSCAPE ? 'L' : 'P'
      },
      metrics: {
        vw: W,
        vh: H,
        ar: _math.precision(ASPECT_RATIO),
        dx: DELTA_X,
        dy: DELTA_Y
      },
      layout: {
        grid,
        typo,
        views,
        safe,
        transform: processTransformations()
      }
    };
  };

  const payload = getEnginePayload();

  if (curBP !== prevBP) {
    onCriticalReflow(payload);
  } else if (Math.abs(DELTA_X) > 50 || Math.abs(DELTA_Y) > 50) {
    onLayoutChange(payload);
  }

  const syncCache = (key, data) => {
    memoCache[key] = {
      ts: Date.now(),
      data: data,
      hash: `${W}x${H}`
    };
  };

  syncCache('last_render', payload);

  const N4 = "Mzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MQ3NTkyMzg0NzU5jM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT";
  const N5 = "IzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjMIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzzODQ3NM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5Mj";
  const N6 = "M4NDc1OTIzODQ3NTkyMzg0NzUPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr85MjM4NDc1OTIzODQ3NTkyMzgPMxsvmSAYtFecNLcMqVgdCiywDUmW3p4FdFsvo4ujaHS9n8NTO4DXjznIcPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr8hXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr84";
  const N7 = "Mzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMz0Dc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT";
  const N8 = "IzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjOTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5Mj";
  const N9 = "M4NDc1OTIzODQ3NTkyMzg0NzUPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr85MjM4NDc1OTIzODQ3NTkyMzgPMxsvmSAYtFecNLcMqVgdCiywDUmW3p4FdFsvo4ujaHS9n8NTO4DXjznIcPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr8hXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr84";
  
  return {
    state: payload,
    next: {
      pW: W,
      pH: H,
      pBP: curBP
    },
    utils: {
      rebase: (val) => val * SCALE_V,
      vRebase: (val) => val * SCALE_H
    }
  };
}

///////////////////////////////

"use strict";let t=1,n=9;let e=0,r=0;let a=0,i=0,o=0,l=0,c=0,f=0;const u=new Int32Array([5,1,5,1,5,1,5,1,1,5,1,5,1,5,1,5,5,4,5,4,5,4,5,4,4,5,4,5,4,5,4,5,5,4,5,4,5,4,5,4,4,5,4,5,4,5,4,5,5,0,5,0,5,0,5,0,0,5,0,5,0,5,0,5]);let s=new Int32Array(u);const w=new Int32Array([0,0,0,0,0,0,0,0,8,0,29,0,29,0,29,0,0,16,0,16,0,16,0,6,4,0,5,0,5,0,5,0,0,2,0,9,0,7,0,6,1,0,6,0,6,0,6,0,0,3,0,4,0,4,0,3,0,0,9,0,7,0,6,0]),h=new Int32Array([0,0,0,0,0,0,0,0,8,0,29,0,29,0,29,0,0,16,0,16,0,16,0,11,15,0,10,0,10,0,10,0,0,6,0,6,0,6,0,7,4,0,3,0,3,0,3,0,0,1,0,1,0,1,0,2,0,0,0,0,0,0,0,0]);let d=new Int32Array(w);const g=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,-1,-1,8,9,10,11,12,13,14,15,-1,-1,16,17,18,19,20,21,22,23,-1,-1,24,25,26,27,28,29,30,31,-1,-1,32,33,34,35,36,37,38,39,-1,-1,40,41,42,43,44,45,46,47,-1,-1,48,49,50,51,52,53,54,55,-1,-1,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),p=new Int32Array([21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48,51,52,53,54,55,56,57,58,61,62,63,64,65,66,67,68,71,72,73,74,75,76,77,78,81,82,83,84,85,86,87,88,91,92,93,94,95,96,97,98]),m=new Int32Array([-11,-9,11,9]),y=new Int32Array([1,3,5,7,8,10,12,14,17,19,21,23,24,26,28,30,33,35,37,39,40,42,44,46,49,51,53,55,56,58,60,62]),M=(new Int32Array([62,60,58,56,55,53,51,49,46,44,42,40,39,37,35,33,30,28,26,24,23,21,19,17,14,12,10,8,7,5,3,1]),new Int32Array(64).fill(-1));let b,v,x,k,A=0,I=1,_=0,C=0,L=0,E=!1,S=!1;let N=100,R=190,B=190;let P=new Int32Array(256),D=new Int32Array(64),H=new Int32Array(64),T=new Int32Array(256),W=new Int32Array(64),F=new Int32Array(64);let U=new Int16Array(4096);const Y=(t,n)=>(t<<6)+n;let j=new Array(64),X=new Array(64);function J(){Tt&&0!==ir&&0!==Mr?(fetch("visit.php?level=1&result="+ir+"-"+Mr),q()):setTimeout(J,200)}async function q(){var n;if(S=!0,r++,x=!(1&r),A=0,I=1,e=0,_=0,C=0,k=0,L=0,b=0,X[0]=0,s.set(u),d.set(w),D[0]=0,we(se),N=100,R=190,B=190,N+=Q(-5,0,5),B+=Q(-5,0,5),R+=Q(10,20,30),d[30]+=Q(0,1,2),d[33]+=Q(0,1,2),d[39]+=Q(0,1,2),d[40]+=Q(0,1,2),d[35]+=Q(0,-3,-6),d[Q(49,51,53)]+=4,function(){for(let t=0;t<2097152;t++)Qe[t]=0,Ve[t]=0,tr[t]=0,nr[t]=0,er[t]=0,rr[t]=0;Ge=0,Oe=0,Ke=0}(),await z(500),_t=!1,Ct=-1,Lt=-1,Un=Yn=0,zn=!1,Ut(),qt(),Gt("Jaihorse makhos.com"),n="x4s level "+t,wt.textContent=n,Ot(!1),jt(),await z(500),Mt.textContent="â€‰",bt.textContent="â€‰",await z(500),await Z("Level "+t,500),0===t&&(await Z("à¸•à¹ˆà¸­à¹ƒà¸«à¹‰",250),await async function(){if(1===It)return;const t=Et,n=tn*t,e=At[tt][6];fn(e),await un(e,en,rn);const r=3*Et,a=-Et;if(an=r-ln,on=a-cn,await sn(20,r,a),K(.6)){const e=Q(8,10,12),i=s[e],o=At[It][Zt(i)];if(4===i)return;let l;do{l=Q(8,10,12)}while(l===e);const c=le(l)*t,f=ce(l)*t,u=le(e)*t,w=ce(e)*t,h=8*t/2,d=8*t,g=Math.random();g<.3&&(await sn(200,u,w,n),await wn(300,u,w)),g<.6&&(await sn(200,c,f,n),await wn(300,c,f)),await sn(200,u,w,n),await Re(),zt(4,e),await sn(600,h,d,0,o,null,null,bn),await Re(),await sn(360,r,a),s[e]=4}else{const e=Q(58,60,62),i=s[e],o=At[It][Zt(i)];if(4===i)return;const l=le(e)*t,c=ce(e)*t;await sn(300,l,c,n,o,null,null,null,null,An),zt(2,e),await Re(),await sn(360,r,a),s[e]=2}}(),qt(),await z(500)),Te=We=180,Mt.style.color="#aaa",bt.style.color="#eee",Ye(),Qt(!0),await Z(x?"à¸„à¸¸à¸“à¹€à¸”à¸´à¸™à¸«à¸¥à¸±à¸‡":"à¸„à¸¸à¸“à¹€à¸”à¸´à¸™à¸à¹ˆà¸­à¸™",250),x){const t=14,n=21,e=t|n<<8;await Vt(e),s[n]=s[t],s[t]=4,qt()}!function(){a=i=o=l=0;let t=0;for(let n=0;n<32;n++){const e=y[n],r=s[e];if(4!==r)switch(t++,r){case 0:a++;break;case 1:i++;break;case 2:o++;break;case 3:l++}}c=t}(),S=!1}async function z(t){const n=performance.now();for(let t=0;t<At[tt].length;t++){const n=At[tt][t];un(n,n.width,n.height),ut.clearRect(0,0,n.width,n.height)}for(;performance.now()-n<t;)await hn(16,t=>{dn(0,0)});await Re()}async function Z(t,n){G(),await z(n),$(t),await z(2*n),G(),await z(n)}function $(t){vt.textContent=t,vt.classList.add("show")}function G(){vt.classList.remove("show")}function O(){f=1e3*o+100*a+10*l+i}function K(t){return Math.random()<t}function Q(t,n,e){const r=Math.random();return r<.3?t:r<.7?n:e}const V=[["mLPWN256_128.png","mDPWN256_128.png","mLHRS256_128.png","mDHRS256_128.png","brddrk.jpg","brdwht.jpg","mL_ico.png","mD_ico.png","selBlack.png","selWhite.png"],["wLPWN256r_64.png","wDPWN256r_64.png","wLHRS256r_64.png","wDHRS256r_64.png","wEMPTY.png","wNOUSE.png","wL_ico.png","wD_ico.png","selBlack.png","selBlack.png"],["cLPWN256_64.png","cDPWN256_64.png","cLHRS256_64.png","cDHRS256_64.png","brddrk.jpg","brdwht.jpg","cL_ico.png","cD_ico.png","selBlack.png","selBlack.png"],["handMov1_64.png","handMov2_64.png","handCap1_64.png","handCap2_64.png","handCapW_64.png","girlMov3_64.png","girlCap3_64.png"]],tt=3,nt=V.length;let et,rt,at,it,ot,lt,ct,ft,ut,st,wt,ht,dt,gt,pt,mt,yt,Mt,bt,vt,xt=document,kt=!0,At={},It=0,_t=!1,Ct=-1,Lt=-1,Et=1,St=1,Nt=1,Rt=new Int16Array(64),Bt=new Int16Array(64),Pt=[],Dt=[];function Ht(t){return xt.getElementById(t)}let Tt=!1;function Wt(){Ft(),it.addEventListener("pointerdown",t=>{if(t.preventDefault(),S)return;if(3===e)return Zn();if(0!==e)return;const n=Qn(it,t.clientX,t.clientY);n<0||_t&&Kn(n)||function(t){if(!On(t))return!1;_t=!0,Ct=t,$n.length=0;for(let n=0;n<H[0];n++)ee(P[n])===t&&$n.push(re(P[n]));return async function(t){const n=s[t],e=Et,r=le(t)*e,a=ce(t)*e;$t(),0===oe(n)&&ct.drawImage(At[It][9],r,a,e,e),1===oe(n)&&ct.drawImage(At[It][8],r,a,e,e)}(t),!0}(n)&&(function(t,n){Wn=t,Fn=s[t],jn=n.clientX,Xn=n.clientY,Jn=(7&t)*Et,qn=(t>>3)*Et,it.setPointerCapture(n.pointerId),$t(),Sn(bn)}(n,t),Gn=-1,1===H[0]&&(Gn=re(P[0])))},{passive:!1}),it.addEventListener("pointermove",t=>{if(t.preventDefault(),!(Wn<0)){if(!Tn){if(Math.abs(t.clientX-jn)+Math.abs(t.clientY-Xn)<2)return;Tn=!0,zt(4,Wn)}!function(t){const n=it.getBoundingClientRect();Un=(t.clientX-n.left)*(it.width/n.width),Yn=(t.clientY-n.top)*(it.height/n.height)}(t),function(){const t=Math.round(Un-Et/2),n=Math.round(Yn-Et/2);pn&&yn();const e=At[It][Zt(Fn)+0];gn(e,t,n),Jn=t,qn=n;const r=ne(Un,Yn);if(r>=0){const t=(7&r)*Et,n=(r>>3)*Et;ct.globalAlpha=.1,gn(e,t,n),ct.globalAlpha=1}}()}}),it.addEventListener("pointerup",async t=>{if(t.preventDefault(),S)return te(),void $t();it.releasePointerCapture(t.pointerId),zn=Tn,te(),$t();let n=Qn(it,t.clientX,t.clientY);n<0||zn&&!Kn(n)?qt():_t&&Kn(n)?await async function(t){if(!_t)return;let n=-1;for(let e=0;e<H[0];e++)if(ee(P[e])===Ct&&re(P[e])===t){n=e;break}if(n<0)return On(t)&&(Ct=t),qt(),void(S=!1);await async function(t){S=!0;const n=P[t],r=(ee(n),re(n)),a=ie(n);zn?await Vt(n,Jn,qn):await Vt(n),Sn(0===a?An:kn),Ie(n),k=n,L=r,0===ie(k)&&2===s[r]?C++:C=0,_t=!1,e=2,Gt("Sunhorse à¸à¸³à¸¥à¸±à¸‡à¸„à¸´à¸”.."),qt(),je(),await Re(20),await async function(){for(Kt(!1);;){let t="";_++,b=0,we(se);let n=0;if(j[0][0]=0,Ce=0,Le=0,0===H[0]){Pe(1);break}if(1===H[0]&&(n=P[0],await Re(20)),_<4&&0===n&&(n=Be(),0!==n&&(t+="...",await Re(500))),_>6&&0===n&&K(.8)){const e=br();e&&(n=e,t+="..",await Re(500))}if(0===n){if(!1===await Se()){Pe(1);break}n=j[0][0]}if(524288&P[0]||(S=!0,qt(),await Vt(n),S=!1),Ie(n),k=n,524288&k||(L=re(n)),0===ie(k)&&3===s[re(k)]){if(C++,De()){Pe(0);break}}else C=0;if(qt(),t="à¸•à¸²à¸„à¸¸à¸“à¹€à¸”à¸´à¸™"+t,_++,b=0,we(se),!(524288&P[0])){if(0===H[0]){Pe(-1);break}if(H[0]>=1){let n=ee(P[0]);for(let t=1;t<H[0];t++)if(ee(P[t])!==n){n=-1;break}if(n>=0){Ct=n,_t=!0,e=0,Gt(t),qt();break}}e=0,_t=!1,Gt(t);break}Ie(524288),k=524288,b=0,we(se)}0===e&&(Kt(!0),Mt.style.color="#aaa",bt.style.color="#eee",Ye(),Fe&&clearInterval(Fe),Fe=setInterval(()=>{Te>0&&Te--,Ye()},1e3))}(),qt(),S=!1}(n)}(n):qt()}),it.addEventListener("pointercancel",Vn),it.addEventListener("pointerleave",Vn),pt.addEventListener("click",Dn),mt.addEventListener("click",Xt),dt.addEventListener("click",Yt),yt.addEventListener("click",()=>{S||(Pe(-1),Zn())}),window.addEventListener("resize",Ft)}function Ft(){let t=function(){let t=window.innerWidth,n=window.innerHeight;t=t>80*n/95?n:95*t/80;return Math.floor(.8*t)}();const n=window.devicePixelRatio||1;t=8*Math.floor(t/8),et.style.width=t+"px",et.style.height=t+"px",[rt,it,lt].forEach(e=>{e.width=t*n,e.height=t*n,e.style.width=t+"px",e.style.height=t+"px"}),Et=it.width/8,St=Nt=it.width,jt(),Ut(),Jt(),qt(),lt.style.boxShadow="0 0 2px 2px #333"}function Ut(){let n=.05;0===t&&(n=.08),r<2&&(n=0);for(let t=0;t<64;t++)Pt[t]=(2*Math.random()-1)*n,Dt[t]=(2*Math.random()-1)*n;!function(){const t=Et;for(let n=0;n<64;n++)Rt[n]=Math.round(((7&n)+Pt[n])*t),Bt[n]=Math.round(((n>>3)+Dt[n])*t)}()}function Yt(){It=(It+1)%3,jt(),Jt()}function jt(){dt.src=V[It%3][x?6:7],gt.src=V[It%3][x?7:6],qt()}function Xt(){kt=!kt,cellNumSwitch.classList.toggle("off",!kt),Jt()}function Jt(){const t=Et,n=.03*t;at.font=(.15*t|0)+"px Arial",at.fillStyle="#A98",at.textAlign="right",at.textBaseline="top";for(let e=0;e<64;e++){const r=7&e,a=e>>3,i=r+a&1;if(at.drawImage(At[It][i?4:5],r*t,a*t,t,t),kt&&i){const i=M[x?63-e:e];at.fillText(i,r*t+t-n,a*t+n)}}}function qt(t=!0){ot.clearRect(0,0,it.width,it.height),$t();for(let t=0;t<64;t++){const n=s[t];n<0||n>3||zt(n,t)}if(t&&_t){const t=Et,n=Ct,e=Zt(s[n]),r=At[It][0===oe(e)?9:8];ct.drawImage(r,(7&n)*t,(n>>3)*t,t,t)}}function zt(t,n){const e=Et;if(4===t)!function(t){const n=Et,e=(7&t)*n,r=(t>>3)*n,a=.2*n;ot.clearRect(e,r-a,n,n+2*a),ot.clearRect(e-a,r,n+2*a,n)}(n);else{const r=At[It][Zt(t)],a=Rt[n],i=Bt[n];r&&ot.drawImage(r,a,i,e,e)}}function Zt(t){return x||4===t||5===t?t:1^t}function $t(){ct.clearRect(0,0,lt.width,lt.height)}function Gt(t){st.textContent=t}function Ot(t){yt.style.visibility=t?"visible":"hidden"}function Kt(t){yt.classList.toggle("disabled",!t)}function Qt(t){mt.style.display=t?"inline":"none",pt.style.display=t?"inline":"none"}async function Vt(n,e=null,r=null){const a=ee(n),i=re(n),o=ie(n),l=s[a],c=1===oe(l)&&1!=It,f=Et;pn=null;const u=Rt[a],w=Bt[a],h=Rt[i],d=Bt[i],g=At[It][Zt(l)+0];At[It][4];if(!c){zt(4,a);const t=e??u,n=r??w;return await hn(200,e=>{const r=Math.round(t+(h-t)*e),a=Math.round(n+(d-n)*e);gn(g,r,a)}),void zt(l,i)}const p=0!=(131072&o),m=0!=(262144&o),y=!p&&!m&&1===l,M=Ce>0?ee(Ce):-1,b=Ce>0?re(Ce):-1,v=a>=24;let x,k=1,A=!1;0===t?(k=1.2,x=y?5:6):x=m?3:3===l&&0===It?4:p?v?3:2:v?0:1,(t>1||Ee>150)&&(A=!0);const I=_>6&&y&&!A,C=(I&&K(.1),I&&M===a&&b!==i),L=I&&M!==a,E=At[tt][x];fn(E);const S=tn*f,N=u,R=w,B=h,P=d;await un(E,en,rn);const D=3*Et,H=-Et;an=D-ln,on=H-cn,await sn(20,D,H);const T=N+Math.round((.1*Math.random()-.05)*f),W=R+Math.round((3===l||p?.1:-.1)*f);if(L){const t=le(M)*f,n=ce(M)*f,e=(t+D)/2,r=(n+H)/2;await sn(300*k,t,n),await wn(300,t,n),await sn(300*k,e,r,S),await wn(300,e,r)}if(p?await sn(200,N,R):(await sn(300*k,T,W,a<16?-S/2:0),I&&K(.1)&&await wn(300,T,W),await Re(20),await sn(60,N,R),await Re(60*(1+Math.random()))),zt(4,a),C){const t=le(b)*f,n=ce(b)*f;await sn(300*k,t,n,0,g,null,null,null,vn),await Re(300),await sn(300,u+.1*f,w+.1*f,0,g,null,null,null,vn),await Re(300)}if(I&&K(.1)){const t=Math.round(.2*(2*Math.random()-1)*f),n=Math.round(.3*(2*Math.random()-1)*f),e=h+t,r=d+n,a=B+t,i=P+n,o=(D+B)/2,l=(H+P)/2;await sn(300*k,a,i,0,g,null,null,null,vn),await Re(),await sn(200,o,l,0,g,e,r),await sn(200,a,i,0,g,e,r),await sn(200,B,P,0,g,null,null,null,xn),await Re()}else p?await sn(300*k,B,P,S,g,null,null,null,null,kn):await sn(300*k,B,P,0,g,null,null,null,vn),await Re();if(zt(l,i),y&&i>24&&K(.2)){const t=i-16,n=s[t];if(0===n||1===n){const e=Rt[t],r=Bt[t],a=e+Math.round(.3*(2*Math.random()-1)*f),i=r-Math.round(.3*Math.random()*f),o=At[It][Zt(n)+0];zt(4,t),await sn(60,(a+D)/2,(i+H)/2,0,o,a,i),await Re(),await sn(200,a,i,S,o,a,i),await Re(),await sn(200,e,r,0,o,null,null,null,xn),zt(n,t)}}if(p){const t=function(t){if(!(131072&t))return-1;const n=ee(t),e=re(t);return n>e?le(n)>le(e)?e+9:e+7:le(n)>le(e)?e-7:e-9}(n),e=le(t)*f,r=ce(t)*f,a=At[It][Zt(ue(n))+0];await sn(200*k,e,r,S),await Re(),zt(4,t),await sn(200*k,D,H,0,a)}else await sn(200*k,D,H);if(m){const t=At[It][Zt(1)];await sn(200*k,B,P,0,t,null,null,null,null,An),await Re(),zt(3,i),await sn(200*k,D,H)}}const tn=2;let nn=1,en=0,rn=0,an=0,on=0,ln=0,cn=0;function fn(t){nn=11*Et/t.height,en=t.width*nn,rn=11*Et,ln=Math.round(400*nn),cn=Math.round(rn-150*nn)}async function un(t,n,e){return ft.width=n,ft.height=e,ut.clearRect(0,0,n,e),ut.drawImage(t,0,0,n,e),ft}async function sn(t,n,e,r=0,a=null,i=null,o=null,l=null,c=null,f=null){const u=Math.max(20,200,Hn(t));null!==l?Sn(l):null!==c&&Sn(c,u);const s=n-ln,w=e-cn,h=an,d=on,g=s-h,p=w-d,m=.5*(h+s),y=.5*(d+w)-r,M=0!==r;await hn(u,t=>{let n,e;M?(n=Mn(h,m,s,t),e=Mn(d,y,w,t)):(n=h+g*t,e=d+p*t),a&&null!=i&&null!=o?(gn(a,i,o),dn(n,e)):a?dn(n,e,n+ln,e+cn,a):dn(n,e)}),null!==f&&Sn(f,u),an=s,on=w}async function wn(t,n,e,r=Et/50){const a=performance.now();for(;performance.now()-a<t;){const a=(2*Math.random()-1)*r,i=(2*Math.random()-1)*r;await sn(t/2,n+a,e+i)}await sn(60,n,e)}async function hn(t,n){0;return new Promise(e=>{const r=performance.now();requestAnimationFrame((function a(i){const o=Math.min(1,(i-r)/t),l=function(t){return t*t*(3-2*t)}(o);pn&&yn(),n(l),o<1?requestAnimationFrame(a):e()}))})}function dn(t,n,e,r,a=null){const i=Math.round(Math.max(0,t)),o=Math.round(Math.max(0,n)),l=Math.round(Math.min(t+ft.width,St)-i),c=Math.round(Math.min(n+ft.height,Nt)-o);if(l<=0||c<=0)return;const f=Math.round(i-t),u=Math.round(o-n);null!=a&&gn(a,Math.round(e),Math.round(r)),ct.drawImage(ft,f,u,l,c,i,o,l,c),mn(i,o,l,c)}function gn(t,n,e){ct.drawImage(t,n,e,Et,Et),mn(n,e,Et,Et)}let pn=null;function mn(t,n,e,r){if(pn){const a=Math.min(pn.x,t),i=Math.min(pn.y,n),o=Math.max(pn.x+pn.w,t+e),l=Math.max(pn.y+pn.h,n+r);pn={x:a,y:i,w:o-a,h:l-i}}else pn={x:t,y:n,w:e,h:r}}function yn(t,n,e,r){ct.clearRect(pn.x,pn.y,pn.w,pn.h),pn=null}function Mn(t,n,e,r){const a=1-r;return a*a*t+2*a*r*n+r*r*e}const bn=0,vn=1,xn=2,kn=3,An=4;let In,_n=!1,Cn=!1,Ln={classic:{},default:{}};async function En(t,n,e){const r=await fetch(e),a=await r.arrayBuffer();Ln[t][n]=await In.decodeAudioData(a)}function Sn(t,n=null){if(!_n||!Cn||!Rn)return;if(1===It)return;const e=Ln[0===It?"classic":"default"][t]||Ln.default[t];if(!e)return;const r=In.createBufferSource(),a=In.createGain();let i=1,o=Hn(Pn);t===vn&&n>0&&(i=1e3*e.duration/n),r.buffer=e,r.playbackRate.value=i,a.gain.value=o,r.connect(a).connect(In.destination),r.start()}function Nn(){if(_n)return;In=new(window.AudioContext||window.webkitAudioContext),"suspended"===In.state&&In.resume();const t=In.createBufferSource();t.buffer=In.createBuffer(1,1,In.sampleRate),t.connect(In.destination),t.start(0),_n=!0,async function(){await Promise.all([En("classic",bn,"mPck_40.wav"),En("classic",vn,"mMov_320.wav"),En("classic",xn,"mFix_72.wav"),En("classic",kn,"mCap_320.wav"),En("classic",An,"mHit_20.wav"),En("default",bn,"cPck_20.wav"),En("default",vn,"cMov_300.wav"),En("default",xn,"cFix_60.wav"),En("default",kn,"cCap_120.wav"),En("default",An,"cHit_60.wav")]),Cn=!0}()}let Rn=!1,Bn=0,Pn=.5;async function Dn(){_n||await Nn(),Rn=!0,Bn=(Bn+1)%3,0===Bn?(pt.textContent="ðŸ”ˆ",Rn=!1):1===Bn?(pt.textContent="ðŸ”‰",Pn=.3):(pt.textContent="ðŸ”Š",Pn=.5)}function Hn(t,n=.25){return t*(1+(2*Math.random()-1)*n)}let Tn=!1,Wn=-1,Fn=4,Un=0,Yn=0,jn=0,Xn=0,Jn=null,qn=null,zn=!1;async function Zn(){S||2!==e&&(await q(),e=0)}let $n=[],Gn=-1;function On(t){for(let n=0;n<H[0];n++)if(ee(P[n])===t)return!0;return!1}function Kn(t){if(!_t)return!1;for(let n=0;n<H[0];n++)if(ee(P[n])===Ct&&re(P[n])===t)return!0;return!1}function Qn(t,n,e){const r=t.getBoundingClientRect(),a=t.width/r.width,i=t.height/r.height,o=Math.floor((n-r.left)*a/Et),l=Math.floor((e-r.top)*i/Et);return o<0||o>7||l<0||l>7?-1:8*l+o}function Vn(){Tn&&(te(),$t(),qt())}function te(){Tn=!1,Wn=-1,Fn=4}function ne(t,n){if(Gn>=0)return Gn;let e=-1,r=1.1*Et*(1.1*Et);for(const a of $n){const i=t-((7&a)*Et+Et/2),o=n-((a>>3)*Et+Et/2),l=i*i+o*o;l<r&&(e=a,r=l)}return e}function ee(t){return 255&t}function re(t){return t>>8&255}function ae(t){return t<<8}function ie(t){return 16711680&t}function oe(t){return 5&t}function le(t){return 7&t}function ce(t){return t>>3}function fe(t){return 2&t?196608:131072}function ue(t){return 65536&t?2:0}const se=!0;function we(t){let n=b>0?W[b-1]:k,e=!1;if(H[b]=D[b],131072&n&&0==(262144&n)&&(vr(),e=he(b>0?re(W[b-1]):L),vr(),e))return ge(0,0,524288),void(D[b+1]=H[b]);if(e=!1,524288&n)de(b>0?re(W[b-2]):L),e=!0;else for(let t=0;t<32;t++){const n=y[t],r=s[n];r>=4||(5&r)!=A||de(n)&&(e=!0)}if(!e&&t===se)for(let t=0;t<32;t++){const n=y[t],e=s[n];if(!(e>=4||(5&e)!=A))if(0!==e)if(1!==e)if(2!==e&&3!==e);else for(let t=0;t<4;t++)for(let e=n;(e=g[p[e]+m[t]],-1!==e)&&4===s[e];)ge(n,e,0);else{const t=7&n;7!==t&&4===s[n+9]&&ge(n,n+9,0),0!==t&&4===s[n+7]&&ge(n,n+7,0)}else{const t=7&n;0!==t&&4===s[n-9]&&ge(n,n-9,0),7!==t&&4===s[n-7]&&ge(n,n-7,0)}}D[b+1]=H[b]}function he(t){const n=s[t];if(0===n){if(t<=15)return!1;const n=7&t;if(n>1&&1==(5&s[t-9])&&4===s[t-18])return!0;if(n<6&&1==(5&s[t-7])&&4===s[t-14])return!0}if(1===n){if(t>=48)return!1;const n=7&t;if(n<6&&0==(5&s[t+9])&&4===s[t+18])return!0;if(n>1&&0==(5&s[t+7])&&4===s[t+14])return!0}if(2===n||3===n)for(let n=0;n<4;n++)for(let e=t;e=g[p[e]+m[n]],-1!==e;)if(4!==s[e]){if((5&s[e])===I){let t=g[p[e]+m[n]];if(-1===t)break;if(4===s[t])return!0}break}return!1}function de(t){const n=s[t];let e=!1;if(0===n){if(t>15){const n=7&t;n>1&&1==(5&s[t-9])&&4===s[t-18]&&(ge(t,t-18,fe(s[t-9])),e=!0),n<6&&1==(5&s[t-7])&&4===s[t-14]&&(ge(t,t-14,fe(s[t-7])),e=!0)}return e}if(1===n){if(t<48){const n=7&t;n<6&&0==(5&s[t+9])&&4===s[t+18]&&(ge(t,t+18,fe(s[t+9])),e=!0),n>1&&0==(5&s[t+7])&&4===s[t+14]&&(ge(t,t+14,fe(s[t+7])),e=!0)}return e}if(2===n||3===n){for(let n=0;n<4;n++)for(let r=t;r=g[p[r]+m[n]],-1!==r;)if(4!==s[r]){if((5&s[r])===I){let a=g[p[r]+m[n]];if(-1===a)break;4===s[a]&&(ge(t,a,fe(s[r])),e=!0)}break}return e}return e}function ge(t,n,e){let r=H[b];0===s[t]&&n<=7&&(e|=262144),1===s[t]&&n>=56&&(e|=262144),P[r]=t|ae(n)|e,T[r]=((t,n)=>U[Y(t,n)])(n,t),131072&e&&(T[r]+=N),196608&e&&(T[r]+=R),262144&e&&(T[r]+=R),H[b]++}function pe(){const t=0===A;let n=0,e=0;if(0==(a|o))return t?-ke+b:ke-b;if(0==(i|l))return t?ke-b:-ke+b;const r=_<35?d:h;for(let t=0;t<32;t++){const a=y[t],i=s[a];4!==i&&(0===i?n+=r[a]:1===i&&(e+=r[63-a]))}if(c<=4){if(O(),1010==f)return 0;let n=3*(o+l)|0;for(let t=0;t<32;t++){const e=y[t],r=s[e];4!==r&&(0===r?n+=ce(e)+5:1===r&&(n+=ce(63-e)+5))}n+=5*b,ur++;const e=function(t){ur++;const n=Number(0xffffffffn&t),e=Number(t>>32n);let r=2097151&n;const a=fr[r];if(0===a)return 0;if(lr[r]===n&&cr[r]===e)return sr++,a;const i=1|e;r=r+i&2097151;const o=fr[r];if(0===o)return 0;if(lr[r]===n&&cr[r]===e)return sr++,o;for(let t=2;t<=wr;t++){r=r+i&2097151;const t=fr[r];if(0===t)return 0;if(lr[r]===n&&cr[r]===e)return sr++,t}return 0}(hr());if(0!==e){if(sr++,2===e)return t?1e3-n-b:-1e3+n+b;if(3===e)return t?-1e3+n+b:1e3-n-b;if(1===e)return t?n:-n}const r=(u=f,mr.get(u)??0);if(2===r)return t?1e3-n-b:-1e3+n+b;if(3===r)return t?-1e3+n+b:1e3-n-b;if(1===r)return t?n:-n}var u;return n+=a*N+o*R,e+=i*N+l*B,e+=5*(i+l),0===s[8]&&1===s[1]&&(e+=27),1===s[55]&&0===s[62]&&(n+=27),_<35&&(1===s[5]&&1===s[3]&&1===s[21]&&1===s[19]&&(e+=5,1!==s[14]&&1!==s[12]&&1!==s[10]||(e+=8),1===s[17]&&1===s[1]&&(e+=8),1===s[28]&&(e+=5)),0==s[17]&&(4==s[1]&&4==s[8]?n+=17:4==s[1]&&4==s[3]?n+=16:4==s[3]&&(n+=8)),0==s[19]&&(4==s[3]&&4==s[1]||4==s[3]&&4==s[5]?n+=17:(4==s[3]&&1==s[1]&&1==s[5]||4==s[1]&&1==s[3]&&1==s[8]||1==s[1]&&1==s[3])&&(n+=8)),0==s[21]&&(4==s[5]&&4==s[3]||4==s[5]&&4==s[7]?n+=17:(4==s[5]&&1==s[3]&&1==s[7]||4==s[3]&&1==s[5]&&1==s[7])&&(n+=8)),0==s[23]&&4==s[5]&&4==s[7]&&(n+=15),0==s[24]&&4==s[1]&&4==s[3]&&4==s[10]&&1==s[17]&&(n+=17),0==s[62]&&1==s[55]&&(n+=15)),t?n-e:e-n}let me=0,ye=0,Me=0;function be(){E=!1;const t=D[b],n=H[b],e=j[0][b];for(let r=t;r<n;r++)if(P[r]===e)return E=!0,void(T[r]+=ke)}function ve(t){let n=t,e=T[t];for(let r=t+1,a=H[b];r<a;r++)T[r]>e&&(e=T[n=r]);let r=P[t];P[t]=P[n],P[n]=r,r=T[t],T[t]=T[n],T[n]=r}function xe(t){const n=j[b],e=j[b+1],r=X[b+1];n[b]=P[t];for(let t=b+1;t<r;t++)n[t]=e[t];X[b]=r}const ke=1e4;function Ae(t,n,e){if(0===e)return function t(n,e){if(X[b]=b,we(!1),H[b]===D[b]){let t=pe();return t>=e?e:t>n?t:n}E&&be();for(let r=D[b];r<H[b];r++){ve(r),Ie(P[r]);let a=-t(-e,-n);if(_e(),a>n){if(a>=e)return e;n=a,xe(r)}}return n}(t,n);const r=function(){const t=Xe;let n=0n;for(let e=0;e<32;e++){const r=y[e],a=s[r],i=t[e];a>=4||a<0||(n^=i[a])}1===A&&(n^=Je);return n}(),o=function(t,n,e,r){Oe++;const a=Number(0xffffffffn&t)>>>0,i=Number(t>>32n&0xffffffffn)>>>0,o=2097151&a;if(Qe[o]!==a||Ve[o]!==i)return{hit:!1,bestMove:0};const l=tr[o],c=nr[o],f=er[o],u=rr[o];if(l>=n){if(Ge++,c===ze)return{hit:!0,score:f,bestMove:u};if(c===Ze&&f<=e)return{hit:!0,score:f,bestMove:u};if(c===$e&&f>=r)return{hit:!0,score:f,bestMove:u}}return{hit:!1,score:0,bestMove:u}}(r,e,t,n);if(o.bestMove&&0===b&&(j[0][0]=o.bestMove),o.hit)return o.score;if(X[b]=b,we(se),H[b]==D[b]){const t=-1e4+b;return ar(r,e,ze,t,0),t}H[b]-D[b]==1&&a>1&&i>1&&e++,E&&be();let l=t,c=0,f=-1e4;for(let a=D[b];a<H[b];a++){ve(a),Ie(P[a]);let i=-Ae(-n,-t,e-1);if(_e(),i>f&&(f=i,c=P[a]),i>t){if(u=re(P[a]),w=ee(P[a]),h=e,U[Y(u,w)]=U[Y(u,w)]+h,i>=n)return ar(r,e,$e,n,P[a]),n;t=i,xe(a)}}var u,w,h;return ar(r,e,f<=l?Ze:ze,f,c),f}function Ie(t){const n=ee(t),e=re(t);if(W[b]=t,524288&t)return b++,b>v&&(v=b),vr(),!0;if(131072&t){let t=n>e?le(n)>le(e)?e+9:e+7:le(n)>le(e)?e-7:e-9;switch(F[b]=t,s[t]){case 0:a--;break;case 1:i--;break;case 2:o--;break;case 3:l--}c--,s[t]=4}else F[b]=-1;if(262144&t)switch(s[n]){case 0:s[e]=2,o++,a--;break;case 1:s[e]=3,l++,i--}else s[e]=s[n];return s[n]=4,b++,vr(),!0}function _e(){vr(),b--;const t=W[b],n=ee(t),e=re(t);if(!(524288&t)){if(262144&t)switch(s[e]){case 2:s[n]=0,o--,a++;break;case 3:s[n]=1,l--,i++}else s[n]=s[e];if(131072&t){let n=F[b];switch(s[n]=ue(t)|I,s[n]){case 0:a++;break;case 1:i++;break;case 2:o++;break;case 3:l++}c++}s[e]=4}}let Ce=0,Le=0,Ee=-9999;async function Se(){const t=performance.now();b=0,v=0,U.fill(0);let e=0,r=1,a=0;const i=Math.min(3,Math.max(0,16-c>>1));for(;r>=10&&await Ne(r,e,a),Ce=Le,E=!0,e=Ae(-1e4,ke,r),Le=j[0][0],Ee=e,a=performance.now()-t,!(a>=5e3);){if(r>=n&&e<-9988)return!1;if(r>=n&&a>=500&&(e<=-300||e>=300||r>=n+i))break;r++}return e>200&&(Qt(!1),Ot(!0)),He=performance.now()-t,He<1e3&&(He=1e3),We-=Math.floor(He/1e3),We<0&&(We=0),Ge=0,Oe=0,sr=0,ur=0,me=0,ye=0,Me=0,!0}async function Ne(t,n,e){await Re(100)}async function Re(t=60){await new Promise(n=>setTimeout(n,t))}function Be(){let t=0;if(x)switch(_){case 1:t=21|ae(28);break;case 3:t=7|ae(14);break;default:t=0}else switch(_){case 1:t=14|ae(21);break;case 3:t=7|ae(14);break;default:t=0}return t}function Pe(r){fetch("visit.php?level="+t+"&result="+(r>0?"win":r<0?"loose":"draw"));const a=r>0?"à¸„à¸¸à¸“à¸Šà¸™à¸°":r<0?"à¸„à¸¸à¸“à¹à¸žà¹‰":"à¹€à¸ªà¸¡à¸­à¸à¸±à¸™";Gt(a+"!, à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡à¹ƒà¸«à¸¡à¹ˆ"),$(a),0!==r&&(t+=r,t<0&&(t=0),t>2&&(t=2)),n=t-1+9,t<=0&&(n=9),e=3,je()}function De(){return O(),1010==f&&(4===s[7]||4===s[48])||!(C<6)&&(C>25||1111==f)}let He=0,Te=180,We=180,Fe=null;function Ue(t){const n=t%60;return Math.floor(t/60)+":"+(n<10?"0"+n:n)}function Ye(){Mt.textContent=Ue(We),bt.textContent=Ue(Te),We<=0&&(Mt.style.color="#fd0"),Te<=0&&(bt.style.color="#fd0")}function je(){Mt.style.color="#eee",bt.style.color="#aaa",Fe&&clearInterval(Fe),Fe=null,Ye()}let Xe=null,Je=0n;function qe(t){return 6364136223846793005n*BigInt(t)+1n&(1n<<64n)-1n}const ze=0,Ze=1,$e=2;let Ge=0,Oe=0,Ke=0;const Qe=new Uint32Array(2097152),Ve=new Uint32Array(2097152),tr=new Int16Array(2097152),nr=new Int8Array(2097152),er=new Int32Array(2097152),rr=new Int32Array(2097152);function ar(t,n,e,r,a){if(c<=4)return;Ke++;const i=Number(0xffffffffn&t)>>>0,o=Number(t>>32n&0xffffffffn)>>>0,l=2097151&i;if(0===Ve[l]&&0===Qe[l])return Qe[l]=i,Ve[l]=o,tr[l]=n>0?n:1,nr[l]=e,er[l]=r,void(rr[l]=0|a);n>=tr[l]&&(Qe[l]=i,Ve[l]=o,tr[l]=n,nr[l]=e,er[l]=r,rr[l]=0|a)}let ir=0;const or=(1n<<63n)-1n,lr=new Uint32Array(1<<21),cr=new Uint32Array(1<<21),fr=new Uint8Array(1<<21);let ur=0,sr=0,wr=0;function hr(){const t=0===A,n=Xe;let e=0n;for(let r=0;r<32;r++){const a=y[r],i=n[r];let o=s[a];o>=4||o<0||(t||4===o||(o^=1),e^=i[o])}return e&or}function dr(t,n){const e=Number(0xffffffffn&t),r=Number(t>>32n);let a=2097151&e;const i=1|r;for(let t=0;t<1<<21;t++){if(0===fr[a])return lr[a]=e,cr[a]=r,fr[a]=n,t>wr&&(wr=t),!0;if(lr[a]===e&&cr[a]===r)return!1;a=a+i&2097151}return!1}function gr(t){let n="",e=0;for(;e<t.length;){let r=t[e];if(r>="0"&&r<="9"){let r=e+1;r<t.length&&t[r]>="0"&&t[r]<="9"&&r++;const a=parseInt(t.slice(e,r),10);n+="y".repeat(a),e=r}else n+=r,e++}return n}function pr(t){const n=[0,1,2,3,4];for(let t=0;t<32;t++)s[y[t]]=4;let e=0;for(let r=0;r<16;r++){const a=t.charCodeAt(r)-97;let i=Math.floor(a/5),o=a%5;s[y[e++]]=n[i],s[y[e++]]=n[o]}}const mr=new Map([[1001,2],[110,3],[101,1],[1010,1],[2010,2],[1020,3],[1110,2],[1011,3],[210,2],[1002,3],[2001,2],[120,3],[1101,2],[111,3],[201,2],[102,3],[2020,1],[2002,2],[220,3],[202,1],[1111,1],[2110,2],[2101,2],[1021,3],[121,3],[1210,2],[1201,2],[1012,3],[112,3],[3010,2],[3001,2],[1030,3],[130,3],[310,2],[301,2],[1003,3],[103,3]]);const yr=new Map;let Mr=0;function br(){const t=function(){const t=0===A,n=t?[4n,5n,6n,7n]:[5n,4n,7n,6n];let e=0n;if(t)for(let t=0;t<32;t++){const r=s[y[t]];e=e*(r>=4?2n:8n)|(r>=4?0n:n[r])}else for(let t=31;t>=0;t--){const r=s[y[t]];e=e*(r>=4?2n:8n)|(r>=4?0n:n[r])}return e}(),n=yr.get(t);if(!n)return null;let e=n[Math.floor(Math.random()*n.length)];return e=ie(e)|ae(63-re(e))|63-ee(e),e}function vr(){A=0===A?1:0,I=0===A?1:0}window.init=function(){!function(){P.fill(0),T.fill(0),D.fill(0),H.fill(0),W.fill(0),F.fill(0),X.fill(0),U.fill(0);for(let t=0;t<64;t++)j[t]=new Array(64).fill(0);for(let t=0;t<32;t++)M[y[t]]=t+1;et=Ht("boardWrapper"),rt=Ht("boardCanvas"),at=rt.getContext("2d"),it=Ht("pieceCanvas"),ot=it.getContext("2d"),lt=Ht("animeCanvas"),ct=lt.getContext("2d"),ft=xt.createElement("canvas"),ut=ft.getContext("2d"),st=Ht("message"),wt=Ht("version"),yt=Ht("newgame"),dt=Ht("styleSwitch"),gt=Ht("styleComp"),pt=Ht("soundSwitch"),mt=Ht("cellNumSwitch"),ht=Ht("footer"),Mt=Ht("compTime"),bt=Ht("playerTime"),vt=Ht("overlayText"),Ot(!1),Qt(!1),pt.textContent="ðŸ”ˆ",ct.imageSmoothingEnabled=!1,ut.imageSmoothingEnabled=!1,function(){let t=124987n;Xe=[];for(let n=0;n<32;n++){Xe[n]=[];for(let e=0;e<10;e++)t=qe(t),Xe[n][e]=t}t=qe(t),Je=t}()}(),function(){$("Loading...");let t=0,n=0;for(let n=0;n<nt;n++)t+=V[n].length;for(let e=0;e<nt;e++){At[e]=[];for(let r=0;r<V[e].length;r++){const a=At[e][r]=new Image;a.onload=()=>{++n===t&&(Tt=!0,Wt())},a.src=V[e][r]}}}(),async function(t="DB0508.zip",n="DB0508.txt"){try{yr.clear(),Mr=0;const e=await fetch(t);if(!e.ok)throw new Error("HTTP "+e.status);const r=await e.blob(),a=(await JSZip.loadAsync(r)).file(n);if(!a)throw new Error(`File ${n} not found`);const i=(await a.async("text")).split("\n").map(t=>t.trim()).filter(t=>t.length>=21);for(const t of i){const n=t.substring(0,16),e=t.substring(16,21),r=BigInt("0x"+n),a=Number("0x"+e);yr.has(r)||yr.set(r,[]),yr.get(r).push(a),Mr++}}catch(t){}}(),async function(t="background2.jpg",n="description2.txt"){try{const e=await fetch(t);if(!e.ok)throw new Error("HTTP "+e.status);const r=await e.blob(),a=(await JSZip.loadAsync(r)).file(n);if(!a)throw new Error(`File ${n} not found`);const i=await a.async("text");lr.fill(0),cr.fill(0),fr.fill(0),A=0;let o=0,l=0;const c=i.split("\n").map(t=>t.trim()).filter(t=>t&&!t.startsWith("#"));for(const t of c){const n={".":1,"+":2,"-":3}[t[t.length-1]]||0,e=gr(t.substring(0,t.length-1));if(16!==e.length)continue;pr(e);dr(hr(),n)?o++:l++}s.set(u),A=0,ir=o}catch(t){}}(),J()}