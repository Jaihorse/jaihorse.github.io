"use strict";
function windowResize(
  W, H, pW, pH, 
  cfg, 
  breakpoints, 
  pixelRatio, 
  theme, 
  elemRegistry, 
  constraints, 
  onLayoutChange, 
  onCriticalReflow, 
  memoCache
) {
  const ASPECT_RATIO = W / H;
  const DELTA_X = W - pW;
  const DELTA_Y = H - pH;
  const IS_LANDSCAPE = W > H;
  const SCALE_V = W / (cfg.baseWidth || 1920);
  const SCALE_H = H / (cfg.baseHeight || 1080);
  
  const _getBP = (w) => {
    const keys = Object.keys(breakpoints);
    for (let i = keys.length - 1; i >= 0; i--) {
      if (w >= breakpoints[keys[i]]) return keys[i];
    }
    return 'xs';
  };

  const _math = {
    clamp: (v, min, max) => Math.min(Math.max(v, min), max),
    lerp: (a, b, t) => a + (b - a) * t,
    precision: (v, p = 2) => parseFloat(v.toFixed(p)),
    getSafeBound: (val, limit) => val > limit ? limit : val
  };

  const curBP = _getBP(W);
  const prevBP = _getBP(pW);

  const computeGrid = (cols, gutter) => {
    const activeGutter = W < 768 ? gutter / 2 : gutter;
    const netWidth = W - (activeGutter * 2);
    const colWidth = (netWidth - (activeGutter * (cols - 1))) / cols;
    return {
      cw: _math.precision(colWidth),
      gt: activeGutter,
      nw: netWidth
    };
  };

  const resolveTypography = () => {
    const base = theme.fontSize || 16;
    const factor = W < 600 ? 0.85 : W > 1600 ? 1.25 : 1;
    return {
      h1: _math.precision(base * 2.5 * factor),
      body: _math.precision(base * factor),
      lineHeight: _math.precision(1.5 * factor)
    };
  };

  const evaluateVisibility = (registry) => {
    return registry.map(item => {
      const isHidden = item.minW > W || item.minH > H;
      const adaptiveSize = item.fluid ? W * item.ratio : item.baseSize;
      return {
        id: item.id,
        visible: !isHidden,
        rect: {
          w: _math.clamp(adaptiveSize, item.min || 0, item.max || W),
          h: item.autoHeight ? 'auto' : H * (item.vRatio || 0.1)
        }
      };
    });
  };

  const calculateSafeZones = (inset) => {
    const horizontal = _math.clamp(W * inset, 10, 100);
    const vertical = _math.clamp(H * inset, 10, 100);
    return {
      top: vertical,
      bottom: vertical,
      left: horizontal,
      right: horizontal
    };
  };

  const processTransformations = () => {
    const perspective = _math.precision(W * 1.5);
    const zTranslate = curBP === 'xl' ? 100 : 0;
    return `perspective(${perspective}px) translateZ(${zTranslate}px)`;
  };

  const getEnginePayload = () => {
    const grid = computeGrid(cfg.columns || 12, cfg.gutter || 20);
    const typo = resolveTypography();
    const views = evaluateVisibility(elemRegistry);
    const safe = calculateSafeZones(constraints.inset || 0.05);

    return {
      meta: {
        bp: curBP,
        pBp: prevBP,
        dpr: pixelRatio,
        orientation: IS_LANDSCAPE ? 'L' : 'P'
      },
      metrics: {
        vw: W,
        vh: H,
        ar: _math.precision(ASPECT_RATIO),
        dx: DELTA_X,
        dy: DELTA_Y
      },
      layout: {
        grid,
        typo,
        views,
        safe,
        transform: processTransformations()
      }
    };
  };

  const payload = getEnginePayload();

  if (curBP !== prevBP) {
    onCriticalReflow(payload);
  } else if (Math.abs(DELTA_X) > 50 || Math.abs(DELTA_Y) > 50) {
    onLayoutChange(payload);
  }

  const syncCache = (key, data) => {
    memoCache[key] = {
      ts: Date.now(),
      data: data,
      hash: `${W}x${H}`
    };
  };

  syncCache('last_render', payload);

  const N4 = "Mzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MQ3NTkyMzg0NzU5jM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT";
  const N5 = "IzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjMIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzzODQ3NM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5Mj";
  const N6 = "M4NDc1OTIzODQ3NTkyMzg0NzUPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr85MjM4NDc1OTIzODQ3NTkyMzgPMxsvmSAYtFecNLcMqVgdCiywDUmW3p4FdFsvo4ujaHS9n8NTO4DXjznIcPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr8hXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr84";
  const N7 = "Mzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMz0Dc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OT";
  const N8 = "IzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjOTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5MjM4NDc1OTIzODQ3NTkyMzg0NzU5Mj";
  const N9 = "M4NDc1OTIzODQ3NTkyMzg0NzUPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr85MjM4NDc1OTIzODQ3NTkyMzgPMxsvmSAYtFecNLcMqVgdCiywDUmW3p4FdFsvo4ujaHS9n8NTO4DXjznIcPMxsvmIchXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr8hXya4ev4vPTRkNSY6oIQKuSDjRcoysfgmoOJvOIxr84";
  
  return {
    state: payload,
    next: {
      pW: W,
      pH: H,
      pBP: curBP
    },
    utils: {
      rebase: (val) => val * SCALE_V,
      vRebase: (val) => val * SCALE_H
    }
  };
}

///////////////////////////////

"use strict";let t=1,n=t,e=9;let r=0,i=0,a=0,o="",c="",l=0,f=0;let u=0,s=0,w=0,h=0,d=0,p=0;const g=new Int32Array([5,1,5,1,5,1,5,1,1,5,1,5,1,5,1,5,5,4,5,4,5,4,5,4,4,5,4,5,4,5,4,5,5,4,5,4,5,4,5,4,4,5,4,5,4,5,4,5,5,0,5,0,5,0,5,0,0,5,0,5,0,5,0,5]);let m=new Int32Array(g);const y=new Int32Array([0,0,0,0,0,0,0,0,8,0,29,0,29,0,29,0,0,16,0,16,0,16,0,6,4,0,5,0,5,0,5,0,0,2,0,9,0,7,0,6,1,0,6,0,6,0,6,0,0,3,0,4,0,4,0,3,0,0,9,0,7,0,6,0]),M=new Int32Array([0,0,0,0,0,0,0,0,8,0,29,0,29,0,29,0,0,16,0,16,0,16,0,11,15,0,10,0,10,0,10,0,0,6,0,6,0,6,0,7,4,0,3,0,3,0,3,0,0,1,0,1,0,1,0,2,0,0,0,0,0,0,0,0]);let b=new Int32Array(y);const v=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,-1,-1,8,9,10,11,12,13,14,15,-1,-1,16,17,18,19,20,21,22,23,-1,-1,24,25,26,27,28,29,30,31,-1,-1,32,33,34,35,36,37,38,39,-1,-1,40,41,42,43,44,45,46,47,-1,-1,48,49,50,51,52,53,54,55,-1,-1,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),x=new Int32Array([21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48,51,52,53,54,55,56,57,58,61,62,63,64,65,66,67,68,71,72,73,74,75,76,77,78,81,82,83,84,85,86,87,88,91,92,93,94,95,96,97,98]),k=new Int32Array([-11,-9,11,9]),A=new Int32Array([1,3,5,7,8,10,12,14,17,19,21,23,24,26,28,30,33,35,37,39,40,42,44,46,49,51,53,55,56,58,60,62]),I=(new Int32Array([62,60,58,56,55,53,51,49,46,44,42,40,39,37,35,33,30,28,26,24,23,21,19,17,14,12,10,8,7,5,3,1]),new Int32Array(64).fill(-1));let _,C,L,E,R=0,S=1,N=0,B=0,P=0,D=!1,W=!1;let H=100,T=190,U=190;let F=new Int32Array(256),Y=new Int32Array(64),j=new Int32Array(64),X=new Int32Array(256),J=new Int32Array(64),q=new Int32Array(64);let z=new Int16Array(4096);const Z=(t,n)=>(t<<6)+n;let $=new Array(64),G=new Array(64);function O(){Xt&&0!==hr&&0!==Cr?(fetch(Ye+"level=1&result="+hr+"&moves="+Cr),K()):setTimeout(O,200)}async function K(){var e;if(W=!0,a=performance.now(),i++,L=!(1&i),o="",R=0,S=1,r=0,N=0,B=0,E=0,P=0,_=0,G[0]=0,m.set(g),b.set(y),Y[0]=0,Me(ye),H=100,T=190,U=190,H+=it(-5,0,5),U+=it(-5,0,5),T+=it(10,20,30),b[30]+=it(0,1,2),b[33]+=it(0,1,2),b[39]+=it(0,1,2),b[40]+=it(0,1,2),b[35]+=it(0,-3,-6),b[it(49,51,53)]+=4,function(){for(let t=0;t<2097152;t++)or[t]=0,cr[t]=0,lr[t]=0,fr[t]=0,ur[t]=0,sr[t]=0;rr=0,ir=0,ar=0}(),await Q(500),Nt=!1,Bt=-1,Pt=-1,zn=Zn=0,Qn=!1,zt(),Ot(),Kt(),nn("Jaihorse makhos.com"),e="x4s level "+t,yt.textContent=e,en(!1),$t(),await Q(500),It.textContent="â€‰",_t.textContent="â€‰",await Q(500),await V("Level "+t,500),0===t&&0===n&&(await V("à¸•à¹ˆà¸­à¹ƒà¸«à¹‰",250),await async function(){if(1===St)return;const t=Dt,n=cn*t,e=Rt[ot][6];pn(e),await gn(e,fn,un);const r=3*Dt,i=-Dt;if(sn=r-hn,wn=i-dn,await mn(20,r,i),rt(.6)){const e=it(8,10,12),a=m[e],o=Rt[St][Vt(a)];if(4===a)return;let c;do{c=it(8,10,12)}while(c===e);const l=de(c)*t,f=pe(c)*t,u=de(e)*t,s=pe(e)*t,w=8*t/2,h=8*t,d=Math.random();d<.3&&(await mn(200,u,s,n),await yn(300,u,s)),d<.6&&(await mn(200,l,f,n),await yn(300,l,f)),await mn(200,u,s,n),await Ue(),Qt(4,e),await mn(600,w,h,0,o,null,null,_n),await Ue(),await mn(360,r,i),m[e]=4}else{const e=it(58,60,62),a=m[e],o=Rt[St][Vt(a)];if(4===a)return;const c=de(e)*t,l=pe(e)*t;await mn(300,c,l,n,o,null,null,null,null,Rn),Qt(2,e),await Ue(),await mn(360,r,i),m[e]=2}}(),Kt(),await Q(500)),qe=ze=180,It.style.color="#aaa",_t.style.color="#eee",Ge(),an(!0),await V(L?"à¸„à¸¸à¸“à¹€à¸”à¸´à¸™à¸«à¸¥à¸±à¸‡":"à¸„à¸¸à¸“à¹€à¸”à¸´à¸™à¸à¹ˆà¸­à¸™",250),L){const t=14,n=21,e=t|n<<8;await on(e),m[n]=m[t],m[t]=4,Kt()}!function(){u=s=w=h=0;let t=0;for(let n=0;n<32;n++){const e=A[n],r=m[e];if(4!==r)switch(t++,r){case 0:u++;break;case 1:s++;break;case 2:w++;break;case 3:h++}}d=t}(),W=!1}async function Q(t){const n=performance.now();for(let t=0;t<Rt[ot].length;t++){const n=Rt[ot][t];gn(n,n.width,n.height),gt.clearRect(0,0,n.width,n.height)}for(;performance.now()-n<t;)await Mn(16,t=>{bn(0,0)});await Ue()}async function V(t,n){nt(),await Q(n),tt(t),await Q(2*n),nt(),await Q(n)}function tt(t){Ct.textContent=t,Ct.classList.add("show")}function nt(){Ct.classList.remove("show")}function et(){p=1e3*w+100*u+10*h+s}function rt(t){return Math.random()<t}function it(t,n,e){const r=Math.random();return r<.3?t:r<.7?n:e}const at=[["mLPWN256_128.png","mDPWN256_128.png","mLHRS256_128.png","mDHRS256_128.png","brddrk.jpg","brdwht.jpg","mL_ico.png","mD_ico.png","selBlack.png","selWhite.png"],["wLPWN256r_64.png","wDPWN256r_64.png","wLHRS256r_64.png","wDHRS256r_64.png","wEMPTY.png","wNOUSE.png","wL_ico.png","wD_ico.png","selBlack.png","selBlack.png"],["cLPWN256_64.png","cDPWN256_64.png","cLHRS256_64.png","cDHRS256_64.png","brddrk.jpg","brdwht.jpg","cL_ico.png","cD_ico.png","selBlack.png","selBlack.png"],["handMov1_64.png","handMov2_64.png","handCap1_64.png","handCap2_64.png","handCapW_64.png","girlMov3_64.png","girlCap3_64.png"]],ot=3,ct=at.length;let lt,ft,ut,st,wt,ht,dt,pt,gt,mt,yt,Mt,bt,vt,xt,kt,At,It,_t,Ct,Lt=document,Et=!0,Rt={},St=0,Nt=!1,Bt=-1,Pt=-1,Dt=1,Wt=1,Ht=1,Tt=new Int16Array(64),Ut=new Int16Array(64),Ft=[],Yt=[];function jt(t){return Lt.getElementById(t)}let Xt=!1;function Jt(){qt(),st.addEventListener("pointerdown",t=>{if(t.preventDefault(),W)return;if(3===r)return Vn();if(0!==r)return;const n=ae(st,t.clientX,t.clientY);n<0||Nt&&re(n)||function(t){if(!ee(t))return!1;Nt=!0,Bt=t,te.length=0;for(let n=0;n<j[0];n++)fe(F[n])===t&&te.push(ue(F[n]));return async function(t){const n=m[t],e=Dt,r=de(t)*e,i=pe(t)*e;tn(),0===he(n)&&dt.drawImage(Rt[St][9],r,i,e,e),1===he(n)&&dt.drawImage(Rt[St][8],r,i,e,e)}(t),!0}(n)&&(function(t,n){Jn=t,qn=m[t],$n=n.clientX,Gn=n.clientY,On=(7&t)*Dt,Kn=(t>>3)*Dt,st.setPointerCapture(n.pointerId),tn(),Wn(_n)}(n,t),ne=-1,1===j[0]&&(ne=ue(F[0])))},{passive:!1}),st.addEventListener("pointermove",t=>{if(t.preventDefault(),!(Jn<0)){if(!Xn){if(Math.abs(t.clientX-$n)+Math.abs(t.clientY-Gn)<2)return;Xn=!0,Qt(4,Jn)}!function(t){const n=st.getBoundingClientRect();zn=(t.clientX-n.left)*(st.width/n.width),Zn=(t.clientY-n.top)*(st.height/n.height)}(t),function(){const t=Math.round(zn-Dt/2),n=Math.round(Zn-Dt/2);xn&&An();const e=Rt[St][Vt(qn)+0];vn(e,t,n),On=t,Kn=n;const r=le(zn,Zn);if(r>=0){const t=(7&r)*Dt,n=(r>>3)*Dt;dt.globalAlpha=.1,vn(e,t,n),dt.globalAlpha=1}}()}}),st.addEventListener("pointerup",async t=>{if(t.preventDefault(),W)return ce(),void tn();st.releasePointerCapture(t.pointerId),Qn=Xn,ce(),tn();let n=ae(st,t.clientX,t.clientY);n<0||Qn&&!re(n)?Kt():Nt&&re(n)?await async function(t){if(!Nt)return;let n=-1;for(let e=0;e<j[0];e++)if(fe(F[e])===Bt&&ue(F[e])===t){n=e;break}if(n<0)return ee(t)&&(Bt=t),Kt(),void(W=!1);await async function(t){W=!0;const n=F[t],e=(fe(n),ue(n)),i=we(n);Qn?await on(n,On,Kn):await on(n),Wn(0===i?Rn:En),Ne(n),E=n,P=e,ie(n),0===we(E)&&2===m[e]?B++:B=0,Nt=!1,r=2,nn("Sunhorse à¸à¸³à¸¥à¸±à¸‡à¸„à¸´à¸”.."),Kt(),Oe(),await Ue(20),await async function(){for(rn(!1);;){let t="";N++,_=0,Me(ye);let n=0;if($[0][0]=0,Pe=0,De=0,0===j[0]){je(1);break}if(1===j[0]&&(n=F[0],await Ue(20)),N<4&&0===n&&(n=Fe(),0!==n&&(t+="...",await Ue(500))),N>6&&0===n&&rt(.8)){const e=Lr();e&&(n=e,t+="..",await Ue(500))}if(0===n){if(!1===await He()){je(1);break}n=$[0][0]}if(524288&F[0]||(W=!0,Kt(),await on(n),W=!1),Ne(n),E=n,ie(n),524288&E||(P=ue(n)),0===we(E)&&3===m[ue(E)]){if(B++,Xe()){je(0);break}}else B=0;if(Kt(),t="à¸•à¸²à¸„à¸¸à¸“à¹€à¸”à¸´à¸™"+t,N++,_=0,Me(ye),!(524288&F[0])){if(0===j[0]){je(-1);break}if(j[0]>=1){let n=fe(F[0]);for(let t=1;t<j[0];t++)if(fe(F[t])!==n){n=-1;break}if(n>=0){Bt=n,Nt=!0,r=0,nn(t),Kt();break}}r=0,Nt=!1,nn(t);break}Ne(524288),E=524288,_=0,Me(ye)}0===r&&(rn(!0),It.style.color="#aaa",_t.style.color="#eee",Ge(),Ze&&clearInterval(Ze),Ze=setInterval(()=>{qe>0&&qe--,Ge()},1e3))}(),Kt(),W=!1}(n)}(n):Kt()}),st.addEventListener("pointercancel",oe),st.addEventListener("pointerleave",oe),xt.addEventListener("click",Yn),kt.addEventListener("click",Gt),bt.addEventListener("click",Zt),At.addEventListener("click",()=>{W||(je(-1),Vn())}),window.addEventListener("resize",qt)}function qt(){let t=function(){let t=window.innerWidth,n=window.innerHeight;t=t>80*n/95?n:95*t/80;return Math.floor(.8*t)}();const n=window.devicePixelRatio||1;t=8*Math.floor(t/8),lt.style.width=t+"px",lt.style.height=t+"px",[ft,st,ht].forEach(e=>{e.width=t*n,e.height=t*n,e.style.width=t+"px",e.style.height=t+"px"}),Dt=st.width/8,Wt=Ht=st.width,$t(),zt(),Ot(),Kt(),ht.style.boxShadow="0 0 2px 2px #333"}function zt(){let n=.05;0===t&&(n=.08),i<2&&(n=0);for(let t=0;t<64;t++)Ft[t]=(2*Math.random()-1)*n,Yt[t]=(2*Math.random()-1)*n;!function(){const t=Dt;for(let n=0;n<64;n++)Tt[n]=Math.round(((7&n)+Ft[n])*t),Ut[n]=Math.round(((n>>3)+Yt[n])*t)}()}function Zt(){St=(St+1)%3,$t(),Ot()}function $t(){bt.src=at[St%3][L?6:7],vt.src=at[St%3][L?7:6],Kt()}function Gt(){Et=!Et,cellNumSwitch.classList.toggle("off",!Et),Ot()}function Ot(){const t=Dt,n=.03*t;ut.font=(.15*t|0)+"px Arial",ut.fillStyle="#A98",ut.textAlign="right",ut.textBaseline="top";for(let e=0;e<64;e++){const r=7&e,i=e>>3,a=r+i&1;if(ut.drawImage(Rt[St][a?4:5],r*t,i*t,t,t),Et&&a){const a=I[L?63-e:e];ut.fillText(a,r*t+t-n,i*t+n)}}}function Kt(t=!0){wt.clearRect(0,0,st.width,st.height),tn();for(let t=0;t<64;t++){const n=m[t];n<0||n>3||Qt(n,t)}if(t&&Nt){const t=Dt,n=Bt,e=Vt(m[n]),r=Rt[St][0===he(e)?9:8];dt.drawImage(r,(7&n)*t,(n>>3)*t,t,t)}}function Qt(t,n){const e=Dt;if(4===t)!function(t){const n=Dt,e=(7&t)*n,r=(t>>3)*n,i=.2*n;wt.clearRect(e,r-i,n,n+2*i),wt.clearRect(e-i,r,n+2*i,n)}(n);else{const r=Rt[St][Vt(t)],i=Tt[n],a=Ut[n];r&&wt.drawImage(r,i,a,e,e)}}function Vt(t){return L||4===t||5===t?t:1^t}function tn(){dt.clearRect(0,0,ht.width,ht.height)}function nn(t){mt.textContent=t}function en(t){At.style.visibility=t?"visible":"hidden"}function rn(t){At.classList.toggle("disabled",!t)}function an(t){kt.style.display=t?"inline":"none",xt.style.display=t?"inline":"none"}async function on(n,e=null,r=null){const i=fe(n),a=ue(n),o=we(n),c=m[i],l=1===he(c)&&1!=St,f=Dt;xn=null;const u=Tt[i],s=Ut[i],w=Tt[a],h=Ut[a],d=Rt[St][Vt(c)+0];Rt[St][4];if(!l){Qt(4,i);const t=e??u,n=r??s;return await Mn(200,e=>{const r=Math.round(t+(w-t)*e),i=Math.round(n+(h-n)*e);vn(d,r,i)}),void Qt(c,a)}const p=0!=(131072&o),g=0!=(262144&o),y=!p&&!g&&1===c,M=Pe>0?fe(Pe):-1,b=Pe>0?ue(Pe):-1,v=i>=24;let x,k=1,A=!1;0===t?(k=1.2,x=y?5:6):x=g?3:3===c&&0===St?4:p?v?3:2:v?0:1,(t>1||We>150)&&(A=!0);const I=N>6&&y&&!A,_=(I&&rt(.1),I&&M===i&&b!==a),C=I&&M!==i,L=Rt[ot][x];pn(L);const E=cn*f,R=u,S=s,B=w,P=h;await gn(L,fn,un);const D=de(a)/2*Dt,W=-Dt;sn=D-hn,wn=W-dn,await mn(20,D,W);const H=R+Math.round((.1*Math.random()-.05)*f),T=S+Math.round((3===c||p?.1:-.1)*f);if(C){const t=de(M)*f,n=pe(M)*f,e=(t+D)/2,r=(n+W)/2;await mn(300*k,t,n),await yn(300,t,n),await mn(300*k,e,r,E),await yn(300,e,r)}if(p?await mn(200,R,S):(await mn(300*k,H,T,i<16?-E/2:0),I&&rt(.1)&&await yn(300,H,T),await Ue(20),await mn(60,R,S),await Ue(60*(1+Math.random()))),Qt(4,i),_){const t=de(b)*f,n=pe(b)*f;await mn(300*k,t,n,0,d,null,null,null,Cn),await Ue(300),await mn(300,u+.1*f,s+.1*f,0,d,null,null,null,Cn),await Ue(300)}if(I&&rt(.1)){const t=Math.round(.2*(2*Math.random()-1)*f),n=Math.round(.3*(2*Math.random()-1)*f),e=w+t,r=h+n,i=B+t,a=P+n,o=(D+B)/2,c=(W+P)/2;await mn(300*k,i,a,0,d,null,null,null,Cn),await Ue(),await mn(200,o,c,0,d,e,r),await mn(200,i,a,0,d,e,r),await mn(200,B,P,0,d,null,null,null,Ln),await Ue()}else p?await mn(300*k,B,P,E,d,null,null,null,null,En):await mn(300*k,B,P,0,d,null,null,null,Cn),await Ue();if(Qt(c,a),y&&a>24&&rt(.2)){const t=a-16,n=m[t];if(0===n||1===n){const e=Tt[t],r=Ut[t],i=e+Math.round(.3*(2*Math.random()-1)*f),a=r-Math.round(.3*Math.random()*f),o=Rt[St][Vt(n)+0];Qt(4,t),await mn(60,(i+D)/2,(a+W)/2,0,o,i,a),await Ue(),await mn(200,i,a,E,o,i,a),await Ue(),await mn(200,e,r,0,o,null,null,null,Ln),Qt(n,t)}}if(p){const t=function(t){if(!(131072&t))return-1;const n=fe(t),e=ue(t);return n>e?de(n)>de(e)?e+9:e+7:de(n)>de(e)?e-7:e-9}(n),e=de(t)*f,r=pe(t)*f,i=Rt[St][Vt(me(n))+0];await mn(200*k,e,r,E),await Ue(),Qt(4,t),await mn(200*k,D,W,0,i)}else await mn(200*k,D,W);if(g){const t=Rt[St][Vt(1)];await mn(200*k,B,P,0,t,null,null,null,null,Rn),await Ue(),Qt(3,a),await mn(200*k,D,W)}}const cn=2;let ln=1,fn=0,un=0,sn=0,wn=0,hn=0,dn=0;function pn(t){ln=11*Dt/t.height,fn=t.width*ln,un=11*Dt,hn=Math.round(400*ln),dn=Math.round(un-150*ln)}async function gn(t,n,e){return pt.width=n,pt.height=e,gt.clearRect(0,0,n,e),gt.drawImage(t,0,0,n,e),pt}async function mn(t,n,e,r=0,i=null,a=null,o=null,c=null,l=null,f=null){const u=Math.max(20,200,jn(t));null!==c?Wn(c):null!==l&&Wn(l,u);const s=n-hn,w=e-dn,h=sn,d=wn,p=s-h,g=w-d,m=.5*(h+s),y=.5*(d+w)-r,M=0!==r;await Mn(u,t=>{let n,e;M?(n=In(h,m,s,t),e=In(d,y,w,t)):(n=h+p*t,e=d+g*t),i&&null!=a&&null!=o?(vn(i,a,o),bn(n,e)):i?bn(n,e,n+hn,e+dn,i):bn(n,e)}),null!==f&&Wn(f,u),sn=s,wn=w}async function yn(t,n,e,r=Dt/50){const i=performance.now();for(;performance.now()-i<t;){const i=(2*Math.random()-1)*r,a=(2*Math.random()-1)*r;await mn(t/2,n+i,e+a)}await mn(60,n,e)}async function Mn(t,n){0;return new Promise(e=>{const r=performance.now();requestAnimationFrame((function i(a){const o=Math.min(1,(a-r)/t),c=function(t){return t*t*(3-2*t)}(o);xn&&An(),n(c),o<1?requestAnimationFrame(i):e()}))})}function bn(t,n,e,r,i=null){const a=Math.round(Math.max(0,t)),o=Math.round(Math.max(0,n)),c=Math.round(Math.min(t+pt.width,Wt)-a),l=Math.round(Math.min(n+pt.height,Ht)-o);if(c<=0||l<=0)return;const f=Math.round(a-t),u=Math.round(o-n);null!=i&&vn(i,Math.round(e),Math.round(r)),dt.drawImage(pt,f,u,c,l,a,o,c,l),kn(a,o,c,l)}function vn(t,n,e){dt.drawImage(t,n,e,Dt,Dt),kn(n,e,Dt,Dt)}let xn=null;function kn(t,n,e,r){if(xn){const i=Math.min(xn.x,t),a=Math.min(xn.y,n),o=Math.max(xn.x+xn.w,t+e),c=Math.max(xn.y+xn.h,n+r);xn={x:i,y:a,w:o-i,h:c-a}}else xn={x:t,y:n,w:e,h:r}}function An(t,n,e,r){dt.clearRect(xn.x,xn.y,xn.w,xn.h),xn=null}function In(t,n,e,r){const i=1-r;return i*i*t+2*i*r*n+r*r*e}const _n=0,Cn=1,Ln=2,En=3,Rn=4;let Sn,Nn=!1,Bn=!1,Pn={classic:{},default:{}};async function Dn(t,n,e){const r=await fetch(e),i=await r.arrayBuffer();Pn[t][n]=await Sn.decodeAudioData(i)}function Wn(t,n=null){if(!Nn||!Bn||!Tn)return;if(1===St)return;const e=Pn[0===St?"classic":"default"][t]||Pn.default[t];if(!e)return;const r=Sn.createBufferSource(),i=Sn.createGain();let a=1,o=jn(Fn);t===Cn&&n>0&&(a=1e3*e.duration/n),r.buffer=e,r.playbackRate.value=a,i.gain.value=o,r.connect(i).connect(Sn.destination),r.start()}function Hn(){if(Nn)return;Sn=new(window.AudioContext||window.webkitAudioContext),"suspended"===Sn.state&&Sn.resume();const t=Sn.createBufferSource();t.buffer=Sn.createBuffer(1,1,Sn.sampleRate),t.connect(Sn.destination),t.start(0),Nn=!0,async function(){await Promise.all([Dn("classic",_n,"mPck_40.wav"),Dn("classic",Cn,"mMov_320.wav"),Dn("classic",Ln,"mFix_72.wav"),Dn("classic",En,"mCap_320.wav"),Dn("classic",Rn,"mHit_20.wav"),Dn("default",_n,"cPck_20.wav"),Dn("default",Cn,"cMov_300.wav"),Dn("default",Ln,"cFix_60.wav"),Dn("default",En,"cCap_120.wav"),Dn("default",Rn,"cHit_60.wav")]),Bn=!0}()}let Tn=!1,Un=0,Fn=.5;async function Yn(){Nn||await Hn(),Tn=!0,Un=(Un+1)%3,0===Un?(xt.textContent="ðŸ”ˆ",Tn=!1):1===Un?(xt.textContent="ðŸ”‰",Fn=.3):(xt.textContent="ðŸ”Š",Fn=.5)}function jn(t,n=.25){return t*(1+(2*Math.random()-1)*n)}let Xn=!1,Jn=-1,qn=4,zn=0,Zn=0,$n=0,Gn=0,On=null,Kn=null,Qn=!1;async function Vn(){W||2!==r&&(await K(),r=0)}let te=[],ne=-1;function ee(t){for(let n=0;n<j[0];n++)if(fe(F[n])===t)return!0;return!1}function re(t){if(!Nt)return!1;for(let n=0;n<j[0];n++)if(fe(F[n])===Bt&&ue(F[n])===t)return!0;return!1}function ie(t){o+=function(t){const n=I[fe(t)],e=I[ue(t)],r=we(t);let i="-";if(524288&r)return". ";131072&r&&(i="x");return n+i+e+" "}(t)}function ae(t,n,e){const r=t.getBoundingClientRect(),i=t.width/r.width,a=t.height/r.height,o=Math.floor((n-r.left)*i/Dt),c=Math.floor((e-r.top)*a/Dt);return o<0||o>7||c<0||c>7?-1:8*c+o}function oe(){Xn&&(ce(),tn(),Kt())}function ce(){Xn=!1,Jn=-1,qn=4}function le(t,n){if(ne>=0)return ne;let e=-1,r=1.1*Dt*(1.1*Dt);for(const i of te){const a=t-((7&i)*Dt+Dt/2),o=n-((i>>3)*Dt+Dt/2),c=a*a+o*o;c<r&&(e=i,r=c)}return e}function fe(t){return 255&t}function ue(t){return t>>8&255}function se(t){return t<<8}function we(t){return 16711680&t}function he(t){return 5&t}function de(t){return 7&t}function pe(t){return t>>3}function ge(t){return 2&t?196608:131072}function me(t){return 65536&t?2:0}const ye=!0;function Me(t){let n=_>0?J[_-1]:E,e=!1;if(j[_]=Y[_],131072&n&&0==(262144&n)&&(Er(),e=be(_>0?ue(J[_-1]):P),Er(),e))return xe(0,0,524288),void(Y[_+1]=j[_]);if(e=!1,524288&n)ve(_>0?ue(J[_-2]):P),e=!0;else for(let t=0;t<32;t++){const n=A[t],r=m[n];r>=4||(5&r)!=R||ve(n)&&(e=!0)}if(!e&&t===ye)for(let t=0;t<32;t++){const n=A[t],e=m[n];if(!(e>=4||(5&e)!=R))if(0!==e)if(1!==e)if(2!==e&&3!==e);else for(let t=0;t<4;t++)for(let e=n;(e=v[x[e]+k[t]],-1!==e)&&4===m[e];)xe(n,e,0);else{const t=7&n;7!==t&&4===m[n+9]&&xe(n,n+9,0),0!==t&&4===m[n+7]&&xe(n,n+7,0)}else{const t=7&n;0!==t&&4===m[n-9]&&xe(n,n-9,0),7!==t&&4===m[n-7]&&xe(n,n-7,0)}}Y[_+1]=j[_]}function be(t){const n=m[t];if(0===n){if(t<=15)return!1;const n=7&t;if(n>1&&1==(5&m[t-9])&&4===m[t-18])return!0;if(n<6&&1==(5&m[t-7])&&4===m[t-14])return!0}if(1===n){if(t>=48)return!1;const n=7&t;if(n<6&&0==(5&m[t+9])&&4===m[t+18])return!0;if(n>1&&0==(5&m[t+7])&&4===m[t+14])return!0}if(2===n||3===n)for(let n=0;n<4;n++)for(let e=t;e=v[x[e]+k[n]],-1!==e;)if(4!==m[e]){if((5&m[e])===S){let t=v[x[e]+k[n]];if(-1===t)break;if(4===m[t])return!0}break}return!1}function ve(t){const n=m[t];let e=!1;if(0===n){if(t>15){const n=7&t;n>1&&1==(5&m[t-9])&&4===m[t-18]&&(xe(t,t-18,ge(m[t-9])),e=!0),n<6&&1==(5&m[t-7])&&4===m[t-14]&&(xe(t,t-14,ge(m[t-7])),e=!0)}return e}if(1===n){if(t<48){const n=7&t;n<6&&0==(5&m[t+9])&&4===m[t+18]&&(xe(t,t+18,ge(m[t+9])),e=!0),n>1&&0==(5&m[t+7])&&4===m[t+14]&&(xe(t,t+14,ge(m[t+7])),e=!0)}return e}if(2===n||3===n){for(let n=0;n<4;n++)for(let r=t;r=v[x[r]+k[n]],-1!==r;)if(4!==m[r]){if((5&m[r])===S){let i=v[x[r]+k[n]];if(-1===i)break;4===m[i]&&(xe(t,i,ge(m[r])),e=!0)}break}return e}return e}function xe(t,n,e){let r=j[_];0===m[t]&&n<=7&&(e|=262144),1===m[t]&&n>=56&&(e|=262144),F[r]=t|se(n)|e,X[r]=((t,n)=>z[Z(t,n)])(n,t),131072&e&&(X[r]+=H),196608&e&&(X[r]+=T),262144&e&&(X[r]+=T),j[_]++}function ke(){const t=0===R;let n=0,e=0;if(0==(u|w))return t?-Re+_:Re-_;if(0==(s|h))return t?Re-_:-Re+_;const r=N<35?b:M;for(let t=0;t<32;t++){const i=A[t],a=m[i];4!==a&&(0===a?n+=r[i]:1===a&&(e+=r[63-i]))}if(d<=4){if(et(),1010==p)return 0;let n=0;for(let t=0;t<32;t++){const e=A[t],r=m[e];4!==r&&(0===r?n+=pe(e)+5:1===r&&(n+=pe(63-e)+5))}n+=6*(4-u-s),0==(u|s)&&(n+=10),yr++;const e=function(t){yr++;const n=Number(0xffffffffn&t),e=Number(t>>32n);let r=2097151&n;const i=mr[r];if(0===i)return 0;if(pr[r]===n&&gr[r]===e)return Mr++,i;const a=1|e;r=r+a&2097151;const o=mr[r];if(0===o)return 0;if(pr[r]===n&&gr[r]===e)return Mr++,o;for(let t=2;t<=br;t++){r=r+a&2097151;const t=mr[r];if(0===t)return 0;if(pr[r]===n&&gr[r]===e)return Mr++,t}return 0}(vr());if(0!==e){if(Mr++,2===e)return t?1e3-n-_:-1e3+n+_;if(3===e)return t?-1e3+n+_:1e3-n-_;if(1===e)return t?n:-n}const r=(i=p,Ir.get(i)??0);if(2===r)return t?1e3-n-_:-1e3+n+_;if(3===r)return t?-1e3+n+_:1e3-n-_;if(1===r)return t?n:-n}var i;return n+=u*H+w*T,e+=s*H+h*U,e+=5*(s+h),0===m[8]&&1===m[1]&&(e+=27),1===m[55]&&0===m[62]&&(n+=27),N<35&&(1===m[5]&&1===m[3]&&1===m[21]&&1===m[19]&&(e+=5,1!==m[14]&&1!==m[12]&&1!==m[10]||(e+=8),1===m[17]&&1===m[1]&&(e+=8),1===m[28]&&(e+=5)),0==m[17]&&(4==m[1]&&4==m[8]?n+=17:4==m[1]&&4==m[3]?n+=16:4==m[3]&&(n+=8)),0==m[19]&&(4==m[3]&&4==m[1]||4==m[3]&&4==m[5]?n+=17:(4==m[3]&&1==m[1]&&1==m[5]||4==m[1]&&1==m[3]&&1==m[8]||1==m[1]&&1==m[3])&&(n+=8)),0==m[21]&&(4==m[5]&&4==m[3]||4==m[5]&&4==m[7]?n+=17:(4==m[5]&&1==m[3]&&1==m[7]||4==m[3]&&1==m[5]&&1==m[7])&&(n+=8)),0==m[23]&&4==m[5]&&4==m[7]&&(n+=15),0==m[24]&&4==m[1]&&4==m[3]&&4==m[10]&&1==m[17]&&(n+=17),0==m[62]&&1==m[55]&&(n+=15)),t?n-e:e-n}let Ae=0,Ie=0,_e=0;function Ce(){D=!1;const t=Y[_],n=j[_],e=$[0][_];for(let r=t;r<n;r++)if(F[r]===e)return D=!0,void(X[r]+=Re)}function Le(t){let n=t,e=X[t];for(let r=t+1,i=j[_];r<i;r++)X[r]>e&&(e=X[n=r]);let r=F[t];F[t]=F[n],F[n]=r,r=X[t],X[t]=X[n],X[n]=r}function Ee(t){const n=$[_],e=$[_+1],r=G[_+1];n[_]=F[t];for(let t=_+1;t<r;t++)n[t]=e[t];G[_]=r}const Re=1e4;function Se(t,n,e){if(0===e)return function t(n,e){if(G[_]=_,Me(!1),j[_]===Y[_]){let t=ke();return t>=e?e:t>n?t:n}D&&Ce();for(let r=Y[_];r<j[_];r++){Le(r),Ne(F[r]);let i=-t(-e,-n);if(Be(),i>n){if(i>=e)return e;n=i,Ee(r)}}return n}(t,n);const r=function(){0;const t=Ke;let n=0n;for(let e=0;e<32;e++){const r=A[e],i=m[r],a=t[e];i>=4||i<0||(n^=a[i])}1===R&&(n^=Qe);return n}(),i=function(t,n,e,r){0;ir++;const i=Number(0xffffffffn&t)>>>0,a=Number(t>>32n&0xffffffffn)>>>0,o=2097151&i;if(or[o]!==i||cr[o]!==a)return{hit:!1,bestMove:0};const c=lr[o],l=fr[o],f=ur[o],u=sr[o];if(c>=n){if(rr++,l===tr)return{hit:!0,score:f,bestMove:u};if(l===nr&&f<=e)return{hit:!0,score:f,bestMove:u};if(l===er&&f>=r)return{hit:!0,score:f,bestMove:u}}return{hit:!1,score:0,bestMove:u}}(r,e,t,n);if(i.bestMove&&0===_&&($[0][0]=i.bestMove),i.hit)return i.score;if(G[_]=_,Me(ye),j[_]==Y[_]){return-1e4+_}j[_]-Y[_]==1&&u>1&&s>1&&e++,D&&Ce();let a=t,o=0,c=-1e4;for(let i=Y[_];i<j[_];i++){Le(i),Ne(F[i]);let a=-Se(-n,-t,e-1);if(Be(),a>c&&(c=a,o=F[i]),a>t){if(l=ue(F[i]),f=fe(F[i]),w=e,z[Z(l,f)]=z[Z(l,f)]+w,a>=n)return wr(r,e,er,n,F[i]),n;t=a,Ee(i)}}var l,f,w;return wr(r,e,c<=a?nr:tr,c,o),c}function Ne(t){const n=fe(t),e=ue(t);if(J[_]=t,524288&t)return _++,_>C&&(C=_),Er(),!0;if(131072&t){let t=n>e?de(n)>de(e)?e+9:e+7:de(n)>de(e)?e-7:e-9;switch(q[_]=t,m[t]){case 0:u--;break;case 1:s--;break;case 2:w--;break;case 3:h--}d--,m[t]=4}else q[_]=-1;if(262144&t)switch(m[n]){case 0:m[e]=2,w++,u--;break;case 1:m[e]=3,h++,s--}else m[e]=m[n];return m[n]=4,_++,Er(),!0}function Be(){Er(),_--;const t=J[_],n=fe(t),e=ue(t);if(!(524288&t)){if(262144&t)switch(m[e]){case 2:m[n]=0,w--,u++;break;case 3:m[n]=1,h--,s++}else m[n]=m[e];if(131072&t){let n=q[_];switch(m[n]=me(t)|S,m[n]){case 0:u++;break;case 1:s++;break;case 2:w++;break;case 3:h++}d++}m[e]=4}}let Pe=0,De=0,We=-9999;async function He(){const t=performance.now();_=0,C=0,z.fill(0);let n=0,r=1,i=0;const a=Math.min(3,Math.max(0,16-d>>1));for(;r>=10&&await Te(r,n,i),Pe=De,D=!0,n=Se(-1e4,Re,r),De=$[0][0],We=n,i=performance.now()-t,!(i>=5e3);){if(r>=e&&n<-9988)return!1;if(r>=e&&i>=500&&(n<=-300||n>=300||r>=e+a))break;r++}return n>200&&(an(!1),en(!0)),Je=performance.now()-t,Je<1e3&&(Je=1e3),ze-=Math.floor(Je/1e3),ze<0&&(ze=0),rr=0,ir=0,Mr=0,yr=0,Ae=0,Ie=0,_e=0,!0}async function Te(t,n,e){await Ue(100)}async function Ue(t=60){await new Promise(n=>setTimeout(n,t))}function Fe(){let t=0;if(L)switch(N){case 1:t=21|se(28);break;case 3:t=7|se(14);break;default:t=0}else switch(N){case 1:t=14|se(21);break;case 3:t=7|se(14);break;default:t=0}return t}const Ye="https://chnp.co.th/makhos/visit.php?";function je(i){const u=i>0?"W":i<0?"L":"D";Math.round((performance.now()-a)/1e3);c+=t+u+" ";let s=Ye+"level="+t+"&result="+encodeURIComponent(c);t>0&&"W"===u&&(s+="&moves="+encodeURIComponent(o)),fetch(s);const w=i>0?"à¸„à¸¸à¸“à¸Šà¸™à¸°":i<0?"à¸„à¸¸à¸“à¹à¸žà¹‰":"à¹€à¸ªà¸¡à¸­à¸à¸±à¸™";nn(w+"!, à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸à¸¡à¹ƒà¸«à¸¡à¹ˆ"),tt(w),function(e){n=t,e>0?(l++,f=0):e<0?(l=0,f++):(l=0,f=0);e>0&&0===n?(t=1,l=f=0):(2===l&&(t++,l=0),2===f&&(t--,f=0));t=Math.max(0,Math.min(2,t))}(i),e=t-1+9,t<=0&&(e=9),r=3,Oe()}function Xe(){return et(),1010==p&&(4===m[7]||4===m[48])||!(B<6)&&(B>25||1111==p)}let Je=0,qe=180,ze=180,Ze=null;function $e(t){const n=t%60;return Math.floor(t/60)+":"+(n<10?"0"+n:n)}function Ge(){It.textContent=$e(ze),_t.textContent=$e(qe),ze<=0&&(It.style.color="#fd0"),qe<=0&&(_t.style.color="#fd0")}function Oe(){It.style.color="#eee",_t.style.color="#aaa",Ze&&clearInterval(Ze),Ze=null,Ge()}let Ke=null,Qe=0n;function Ve(t){return 6364136223846793005n*BigInt(t)+1n&(1n<<64n)-1n}const tr=0,nr=1,er=2;let rr=0,ir=0,ar=0;const or=new Uint32Array(2097152),cr=new Uint32Array(2097152),lr=new Int16Array(2097152),fr=new Int8Array(2097152),ur=new Int32Array(2097152),sr=new Int32Array(2097152);function wr(t,n,e,r,i){if(d<=4)return;ar++;const a=Number(0xffffffffn&t)>>>0,o=Number(t>>32n&0xffffffffn)>>>0,c=2097151&a;if(0===cr[c]&&0===or[c])return or[c]=a,cr[c]=o,lr[c]=n>0?n:1,fr[c]=e,ur[c]=r,void(sr[c]=0|i);const l=or[c],f=cr[c],u=lr[c],s=fr[c];if(f!==o||l!==a)return or[c]=a,cr[c]=o,lr[c]=n,fr[c]=e,ur[c]=r,void(sr[c]=0|i);if(f===o&&l===a){if(n<=u)return;if(e===tr)return;if(s===tr)return;return lr[c]=n,fr[c]=e,ur[c]=r,void(sr[c]=0|i)}}let hr=0;const dr=(1n<<63n)-1n,pr=new Uint32Array(1<<21),gr=new Uint32Array(1<<21),mr=new Uint8Array(1<<21);let yr=0,Mr=0,br=0;function vr(){const t=0===R,n=Ke;let e=0n;for(let r=0;r<32;r++){const i=A[r],a=n[r];let o=m[i];o>=4||o<0||(t||4===o||(o^=1),e^=a[o])}return e&dr}function xr(t,n){const e=Number(0xffffffffn&t),r=Number(t>>32n);let i=2097151&e;const a=1|r;for(let t=0;t<1<<21;t++){if(0===mr[i])return pr[i]=e,gr[i]=r,mr[i]=n,t>br&&(br=t),!0;if(pr[i]===e&&gr[i]===r)return!1;i=i+a&2097151}return!1}function kr(t){let n="",e=0;for(;e<t.length;){let r=t[e];if(r>="0"&&r<="9"){let r=e+1;r<t.length&&t[r]>="0"&&t[r]<="9"&&r++;const i=parseInt(t.slice(e,r),10);n+="y".repeat(i),e=r}else n+=r,e++}return n}function Ar(t){const n=[0,1,2,3,4];for(let t=0;t<32;t++)m[A[t]]=4;let e=0;for(let r=0;r<16;r++){const i=t.charCodeAt(r)-97;let a=Math.floor(i/5),o=i%5;m[A[e++]]=n[a],m[A[e++]]=n[o]}}const Ir=new Map([[1001,2],[110,3],[101,1],[1010,1],[2010,2],[1020,3],[1110,2],[1011,3],[210,2],[1002,3],[2001,2],[120,3],[1101,2],[111,3],[201,2],[102,3],[2020,1],[2002,2],[220,3],[202,1],[1111,1],[2110,2],[2101,2],[1021,3],[121,3],[1210,2],[1201,2],[1012,3],[112,3],[3010,2],[3001,2],[1030,3],[130,3],[310,2],[301,2],[1003,3],[103,3]]);const _r=new Map;let Cr=0;function Lr(){const t=function(){const t=0===R,n=t?[4n,5n,6n,7n]:[5n,4n,7n,6n];let e=0n;if(t)for(let t=0;t<32;t++){const r=m[A[t]];e=e*(r>=4?2n:8n)|(r>=4?0n:n[r])}else for(let t=31;t>=0;t--){const r=m[A[t]];e=e*(r>=4?2n:8n)|(r>=4?0n:n[r])}return e}(),n=_r.get(t);if(!n)return null;let e=n[Math.floor(Math.random()*n.length)];return e=we(e)|se(63-ue(e))|63-fe(e),e}function Er(){R=0===R?1:0,S=0===R?1:0}window.init=function(){!function(){F.fill(0),X.fill(0),Y.fill(0),j.fill(0),J.fill(0),q.fill(0),G.fill(0),z.fill(0);for(let t=0;t<64;t++)$[t]=new Array(64).fill(0);for(let t=0;t<32;t++)I[A[t]]=t+1;lt=jt("boardWrapper"),ft=jt("boardCanvas"),ut=ft.getContext("2d"),st=jt("pieceCanvas"),wt=st.getContext("2d"),ht=jt("animeCanvas"),dt=ht.getContext("2d"),pt=Lt.createElement("canvas"),gt=pt.getContext("2d"),mt=jt("message"),yt=jt("version"),At=jt("newgame"),bt=jt("styleSwitch"),vt=jt("styleComp"),xt=jt("soundSwitch"),kt=jt("cellNumSwitch"),Mt=jt("footer"),It=jt("compTime"),_t=jt("playerTime"),Ct=jt("overlayText"),en(!1),an(!1),xt.textContent="ðŸ”ˆ",dt.imageSmoothingEnabled=!1,gt.imageSmoothingEnabled=!1,function(){let t=124987n;Ke=[];for(let n=0;n<32;n++){Ke[n]=[];for(let e=0;e<10;e++)t=Ve(t),Ke[n][e]=t}t=Ve(t),Qe=t}()}(),function(){tt("Loading...");let t=0,n=0;for(let n=0;n<ct;n++)t+=at[n].length;for(let e=0;e<ct;e++){Rt[e]=[];for(let r=0;r<at[e].length;r++){const i=Rt[e][r]=new Image;i.onload=()=>{++n===t&&(Xt=!0,Jt())},i.src=at[e][r]}}}(),async function(t="DB0508.zip",n="DB0508.txt"){try{_r.clear(),Cr=0;const e=await fetch(t);if(!e.ok)throw new Error("HTTP "+e.status);const r=await e.blob(),i=(await JSZip.loadAsync(r)).file(n);if(!i)throw new Error(`File ${n} not found`);const a=(await i.async("text")).split("\n").map(t=>t.trim()).filter(t=>t.length>=21);for(const t of a){const n=t.substring(0,16),e=t.substring(16,21),r=BigInt("0x"+n),i=Number("0x"+e);_r.has(r)||_r.set(r,[]),_r.get(r).push(i),Cr++}}catch(t){}}(),async function(t="background2.jpg",n="description2.txt"){try{const e=await fetch(t);if(!e.ok)throw new Error("HTTP "+e.status);const r=await e.blob(),i=(await JSZip.loadAsync(r)).file(n);if(!i)throw new Error(`File ${n} not found`);const a=await i.async("text");pr.fill(0),gr.fill(0),mr.fill(0),R=0;let o=0,c=0;const l=a.split("\n").map(t=>t.trim()).filter(t=>t&&!t.startsWith("#"));for(const t of l){const n={".":1,"+":2,"-":3}[t[t.length-1]]||0,e=kr(t.substring(0,t.length-1));if(16!==e.length)continue;Ar(e);xr(vr(),n)?o++:c++}m.set(g),R=0,hr=o}catch(t){}}(),O()}