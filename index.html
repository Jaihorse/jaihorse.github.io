<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="keywords" content="checkers, jaihorse, makhos, sunhorse">
  <title>Sunhorse</title>

  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="SunhorseEngine.js" type="text/plain"></script>

  <style>
    html,body {
      margin:0; padding:0;
      width:100vw; height:100vh;
      overflow:hidden;
      background:#678 url(linen.jpg) repeat;
      font-family:'Prompt',sans-serif; font-weight:300; color:#eee; text-align:center;
    }

    body { font-size: clamp(10px, 3.5vmin, 28px); }
    #topCenter { font-size: clamp(18px, 6vmin, 42px); }
    #version, #footer, #topRight, #newgame { font-size: clamp( 9px, 3vmin, 24px); }
    #cellNumSwitch { font-size: clamp( 6px, 2vmin, 18px); }

    #topBar,#bottomBar {
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      width:min(90vw,80vh);
      margin:0 auto;
    }

    #bottomBar { padding-top: 1.5vmin; }

    #topLeft, #topCenter, #topRight { flex-grow: 1; flex-basis: 0; }
    #bottomLeft, #message, #bottomRight { flex-grow: 0; }

    #topLeft, #bottomLeft { text-align: left; min-width: 15%; }
    #topCenter, #message  { text-align: center; margin-bottom: -1vh; }
    #topRight, #newgame   { text-align: right; }
    #topRight, #cellNumSwitch { color: #aaa; }
    #bottomRight { text-align: right; min-width: 10%; }

    #newgame {
      visibility:hidden;
      padding: 0 5px;
      border-radius: 5px;
      background: #eee;
      color: #555;
      cursor: pointer;
    }
    #newgame.disabled { opacity: 0.4; pointer-events: none; }
    #newgame:hover{ background:#ddd; color:#333; }
    
    canvas {
      margin:5px auto 0 auto;
      background: none;
      /*width:min(90vw,95vh); aspect-ratio:1;*/
      touch-action:none; user-select:none;
      display:block;
      position:absolute; top:0; left:0
    }

    #boardWrapper {
      position: relative;
      margin: 0 auto;    /* centers horizontally */
      width:min(90vw,95vh); aspect-ratio:1;
      display: block;
    }

    #styleSwitch, #styleComp, #soundSwitch, #cellNumSwitch {
      display:inline; height: 3vh; 
      vertical-align: middle; margin-left: 1px;
      cursor: pointer;
    }

    .overlay-text {
      z-index: 3; position: absolute; inset: 0;
      /*background: rgba(200, 200, 200, 0.2);*/
      display: flex;
      align-items: center; justify-content: center;
      font-size: 10vmin; color: #ccc; text-shadow: 0 2px 6px rgba(0,0,0,0.6);
      opacity: 0; transition: opacity 250ms ease;
      pointer-events: none;
    }

    .overlay-text.show {
      opacity: 1;
    }

    #debug{ font-size:12px; color:#ddd; }
  </style>
</head>

<body onload="init()">
  <div class="page">

    <div id="topBar">
      <span id="topLeft">
        <img id="styleComp" />
        <span id="compTime">&nbsp;</span>
      </span>
      <span id="topCenter">Sunhorse</span>
      <span id="topRight">
        <span id="version">&nbsp;</span>
      </span>
    </div>

    <div id="boardWrapper">
      <canvas id="boardCanvas" style="z-index:0; pointer-events:none;"></canvas>
      <canvas id="pieceCanvas" style="z-index:1;"></canvas>
      <canvas id="animeCanvas" style="z-index:2; pointer-events:none;"></canvas>
      <div id="overlayText" class="overlay-text"></div>
    </div>

    <div id="bottomBar">
      <span id="bottomLeft">
        <img id="styleSwitch" />
        <span id="playerTime">&nbsp;</span>
      </span>
      <span id="message">by Jaroonsak Wangviwat</span>
      <span id="bottomRight">
        <span id="newgame">ยอม</span>
        <!--img id="styleSwitch" /-->
        <span id="cellNumSwitch">123</span>
        <span id="soundSwitch">&nbsp;</span>
      </span>
    </div>

    <!--div><span id="footer">&nbsp;</span></div-->
  </div>

  <script src="WindowResize4s.js?v=1920x1080x20260126"></script>
  <script>
    // Resize handler to ensure board stays centered even in frame
    function adjustPageSize() {
      document.body.style.height = window.innerHeight + "px";
      document.body.style.width  = window.innerWidth + "px";
    }
    window.addEventListener("resize", adjustPageSize);
    adjustPageSize(); // run once on load
  </script>
</body>
</html>
